import{a as me}from"./chunk-ZHZ6JAOD.js";import{a as T}from"./chunk-IORNA22M.js";import{c as ne,n as le}from"./chunk-XLGDB24R.js";import{a as oe,b as re,c as se}from"./chunk-SNUM6ZIL.js";import"./chunk-HC3PXDFB.js";import{r as ae}from"./chunk-GNT7AIZA.js";import"./chunk-5ILM3463.js";import"./chunk-MN5F6KP3.js";import{$,$c as ee,Cb as W,G as k,I as A,Ib as q,K as N,Kb as C,Na as H,Pc as X,Qa as s,Qc as Y,Ra as b,Tc as y,Wb as i,X as F,Xb as h,Zb as R,_c as Z,cc as G,d as I,dc as J,e as S,ea as P,fc as K,ha as w,jb as x,la as B,ld as te,nb as E,nc as g,o as M,oc as f,od as ie,pc as Q,r as j,ua as O,ub as U,va as z,vb as V,wb as e,xb as t,yb as u}from"./chunk-W3KPMJ6O.js";import{a as L,b as D}from"./chunk-REZWHGN7.js";var _=(()=>{let l=class l{constructor(a,n){this.pipe=a,this.http=n,this.apiUrl=`${T.apiUrl}/v1/empleados`,this._loading$=new S(!0),this._search$=new I,this._employeeData$=new S([]),this._total$=new S(0),this._state={page:1,pageSize:10,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe($(()=>this._loading$.next(!0)),A(200),F(()=>this._search()),N(200),$(()=>this._loading$.next(!1))).subscribe(o=>{this._employeeData$.next(o.employeeData),this._total$.next(o.total)}),this._search$.next()}get employeeData$(){return this._employeeData$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}getEmployeeStats(){return this.http.get(`${T.apiUrl}/v1/empleados/stats`)}set page(a){this._set({page:a})}set pageSize(a){this._set({pageSize:a})}set searchTerm(a){this._set({searchTerm:a})}set sortColumn(a){this._set({sortColumn:a})}set sortDirection(a){this._set({sortDirection:a})}_set(a){Object.assign(this._state,a),this._search$.next()}_search(){let{pageSize:a,page:n,searchTerm:o}=this._state,d=new Z().set("page",n.toString()).set("limit",a.toString());return o&&(d=d.set("search",o)),this.http.get(this.apiUrl,{params:d}).pipe(j(r=>({employeeData:this.mapEmpleadosToEmployeeList(r.data.data),total:r.data.pagination.total})),k(()=>M({employeeData:[],total:0})))}mapEmpleadosToEmployeeList(a){return a.map(n=>D(L({},n),{img:"./assets/images/laritechfarms/2.jpg",tiempoTrabajo:this.calculateWorkTime(n.fechaContratacion)}))}calculateWorkTime(a){let n=new Date(a),d=new Date().getTime()-n.getTime(),r=Math.floor(d/(1e3*60*60*24*365)),p=Math.floor(d%(1e3*60*60*24*365)/(1e3*60*60*24*30)),v=Math.floor(d%(1e3*60*60*24*30)/(1e3*60*60*24));return`${r} yrs ${p} mons ${v} days`}};l.\u0275fac=function(n){return new(n||l)(w(y),w(ee))},l.\u0275prov=P({token:l,factory:l.\u0275fac,providedIn:"root"});let c=l;return c})();var ce=(c,l)=>l.id,he=c=>["/dashboard/hrmdashboards/employees/ver-empleado",c];function ue(c,l){if(c&1){let m=W();e(0,"tr",38)(1,"th",46),i(2),t(),e(3,"td")(4,"div",26)(5,"div",47),u(6,"img",48),t(),e(7,"div")(8,"div",49)(9,"h6",50),i(10),t()(),e(11,"div",49)(12,"span",51),i(13),t()()()()(),e(14,"td"),i(15),t(),e(16,"td"),i(17),t(),e(18,"td"),i(19),t(),e(20,"td"),i(21),g(22,"date"),t(),e(23,"td"),i(24),t(),e(25,"td")(26,"span",52),i(27),t()(),e(28,"td")(29,"div",53)(30,"a",54),u(31,"i",55),t(),e(32,"a",56),q("click",function(){let n=O(m).$implicit,o=C();return z(o.toggleEmpleadoStatus(n))}),u(33,"i"),t()()()()}if(c&2){let m=l.$implicit,a=C();s(2),h(m.id),s(4),x("src",m.img||"./assets/images/laritechfarms/2.jpg",H),s(4),R("",m.nombre," ",m.apellido,""),s(3),h(m.correo),s(2),h(m.departamento||"N/A"),s(2),h(m.puesto),s(2),h(m.telefono),s(2),h(Q(22,19,m.fechaContratacion,"short")),s(3),h(a.calculateWorkTime(m.fechaContratacion)),s(2),E(m.activo?"bg-success":"bg-danger"),s(),h(m.activo?"Activo":"Inactivo"),s(3),x("routerLink",K(22,he,m.id)),s(2),E(m.activo?"btn-warning":"btn-success"),x("title",m.activo?"Desactivar":"Activar"),s(),E(m.activo?"fe fe-user-x":"fe fe-user-check")}}var je=(()=>{let l=class l{constructor(a,n,o){this.empleadoService=a,this.empleadoApiService=n,this.toastr=o,this.employeeList$=a.employeeData$,this.total$=a.total$,this.loading$=a.loading$,this.stats$=a.getEmployeeStats()}ngOnInit(){}toggleEmpleadoStatus(a){let n=a.activo,o=n?"desactivar":"activar";confirm(`\xBFEst\xE1 seguro de que desea ${o} este empleado?`)&&(n?this.empleadoApiService.deactivateEmpleado(a.id):this.empleadoApiService.activateEmpleado(a.id)).subscribe({next:()=>{this.toastr.success(`Empleado ${o}do exitosamente`,"\xC9xito",{timeOut:3e3,positionClass:"toast-top-right"}),this.empleadoService._search$.next()},error:r=>{console.error("Error response:",r);let p="Error desconocido";r.error?.message?p=r.error.message:r.error?.error?p=r.error.error:r.message?p=r.message:typeof r.error=="string"&&(p=r.error),this.toastr.error(`Error al ${o} el empleado: ${p}`,"Error",{timeOut:3e3,positionClass:"toast-top-right"})}})}get lists(){return[]}calculateWorkTime(a){let n=new Date(a),d=new Date().getTime()-n.getTime(),r=Math.floor(d/(1e3*60*60*24*365)),p=Math.floor(d%(1e3*60*60*24*365)/(1e3*60*60*24*30)),v=Math.floor(d%(1e3*60*60*24*30)/(1e3*60*60*24));return`${r} yrs ${p} mons ${v} days`}};l.\u0275fac=function(n){return new(n||l)(b(_),b(me),b(ae))},l.\u0275cmp=B({type:l,selectors:[["app-employee-list"]],standalone:!0,features:[G([_,y]),J],decls:129,vars:20,consts:[[3,"title","title2","class1","path"],[1,"row"],[1,"col-xl-3","col-lg-6","col-md-6"],[1,"card","custom-card"],[1,"card-body"],[1,"col-7"],[1,"mt-0","text-start"],[1,"fw-medium"],[1,"mb-0","mt-1","text-success"],[1,"col-5"],[1,"icon1","bg-success-transparent","my-auto","float-end"],[1,"las","la-users"],[1,"mb-0","mt-1","text-primary"],[1,"icon1","bg-primary-transparent","my-auto","float-end"],[1,"las","la-male"],[1,"mb-0","mt-1","text-secondary"],[1,"icon1","bg-secondary-transparent","my-auto","float-end"],[1,"las","la-female"],[1,"mb-0","mt-1","text-danger"],[1,"icon1","bg-danger-transparent","my-auto","float-end"],[1,"las","la-user-friends"],[1,"col-md-12"],[1,"card-header"],[1,"card-title"],[1,"row","mb-2","gap-2","gap-lg-0"],[1,"col-lg-6"],[1,"d-flex","align-items-center"],[1,"d-flex","ms-2","mx-2"],[1,"form-group","mb-0"],["name","quantity","id","select-countries17","placeholder","10","data-trigger","",1,"form-control","wd-150","p-0"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],[1,"float-end"],["type","text","placeholder","Buscar",1,"form-control"],[1,"table-responsive"],[1,"table","mb-0","text-nowrap","text-md-nowrap","table-bordered","border"],[1,"border-bottom"],["scope","col"],[1,"mt-4"],[1,"pagination","justify-content-end","mb-0"],[1,"page-item","disabled"],["href","javascript:void(0);",1,"page-link"],[1,"page-item","active"],[1,"page-item"],["scope","row"],[1,"avatar","me-2","avatar-rounded"],["alt","img",3,"src"],[1,"lh-1"],[1,"mb-1"],[1,"fs-12","text-muted"],[1,"badge"],[1,"d-flex","gap-2"],["data-bs-toggle","tooltip","title","Ver Empleado",1,"btn","btn-primary","btn-icon",3,"routerLink"],[1,"fe","fe-eye"],["data-bs-toggle","tooltip",1,"btn","btn-icon",3,"click","title"]],template:function(n,o){if(n&1&&(u(0,"app-hr-dashboard-page-header",0),e(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5)(7,"div",6)(8,"span",7),i(9,"Total Empleados"),t(),e(10,"h3",8),i(11),g(12,"async"),t()()(),e(13,"div",9)(14,"div",10),u(15,"i",11),t()()()()()(),e(16,"div",2)(17,"div",3)(18,"div",4)(19,"div",1)(20,"div",5)(21,"div",6)(22,"span",7),i(23,"Total Hombres"),t(),e(24,"h3",12),i(25),g(26,"async"),t()()(),e(27,"div",9)(28,"div",13),u(29,"i",14),t()()()()()(),e(30,"div",2)(31,"div",3)(32,"div",4)(33,"div",1)(34,"div",5)(35,"div",6)(36,"span",7),i(37,"Total Mujeres"),t(),e(38,"h3",15),i(39),g(40,"async"),t()()(),e(41,"div",9)(42,"div",16),u(43,"i",17),t()()()()()(),e(44,"div",2)(45,"div",3)(46,"div",4)(47,"div",1)(48,"div",5)(49,"div",6)(50,"span",7),i(51,"Nuevos Empleados"),t(),e(52,"h3",18),i(53),g(54,"async"),t()()(),e(55,"div",9)(56,"div",19),u(57,"i",20),t()()()()()()(),e(58,"div",1)(59,"div",21)(60,"div",3)(61,"div",22)(62,"h3",23),i(63,"Lista de empleados"),t()(),e(64,"div",4)(65,"div",24)(66,"div",25)(67,"div",26)(68,"span"),i(69,"Mostrar"),t(),e(70,"div",27)(71,"div",28)(72,"ng-select",29)(73,"ng-option",30),i(74,"10"),t(),e(75,"ng-option",31),i(76,"25"),t(),e(77,"ng-option",32),i(78,"50"),t(),e(79,"ng-option",33),i(80,"100"),t()()()(),e(81,"span"),i(82,"registros"),t()()(),e(83,"div",25)(84,"div",34),u(85,"input",35),t()()(),e(86,"div",36)(87,"table",37)(88,"thead")(89,"tr",38)(90,"th",39),i(91,"No"),t(),e(92,"th",39),i(93,"Nombre Empleado"),t(),e(94,"th",39),i(95,"Departamento"),t(),e(96,"th",39),i(97,"Puesto de Trabajo"),t(),e(98,"th",39),i(99,"N\xFAmero de tel\xE9fono"),t(),e(100,"th",39),i(101,"Fecha Inicio"),t(),e(102,"th",39),i(103,"Tiempo en el puesto"),t(),e(104,"th",39),i(105,"Estado"),t(),e(106,"th",39),i(107,"Acciones"),t()()(),e(108,"tbody"),U(109,ue,34,24,"tr",38,ce),g(111,"async"),t()()(),e(112,"nav",40)(113,"ul",41)(114,"li",42)(115,"a",43),i(116,"Prev"),t()(),e(117,"li",44)(118,"a",43),i(119,"1"),t()(),e(120,"li",45)(121,"a",43),i(122,"2"),t()(),e(123,"li",45)(124,"a",43),i(125,"3"),t()(),e(126,"li",45)(127,"a",43),i(128,"Next"),t()()()()()()()()),n&2){let d,r,p,v;E("btn btn-primary"),x("title","Empleados")("title2","Agregar Nuevo Empleado")("class1","")("path","/dashboard/hrmdashboards/employees/add-empleado"),s(11),h((d=f(12,10,o.stats$))==null||d.data==null?null:d.data.totalEmpleados),s(14),h((r=f(26,12,o.stats$))==null||r.data==null?null:r.data.empleadosHombres),s(14),h(((p=f(40,14,o.stats$))==null||p.data==null?null:p.data.empleadasMujeres)||0),s(14),h((v=f(54,16,o.stats$))==null||v.data==null?null:v.data.empleadosNuevos),s(56),V(f(111,18,o.employeeList$))}},dependencies:[le,ne,ie,te,se,re,oe,X,Y]});let c=l;return c})();export{je as EmployeeListComponent};
