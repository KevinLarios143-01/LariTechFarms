import{a as O}from"./chunk-GOVRRGCU.js";import"./chunk-USS2N3RB.js";import{c as z,n as L}from"./chunk-44QSXYOT.js";import{b as P,c as W}from"./chunk-S5Y45Y7X.js";import"./chunk-PLAIHBDU.js";import{r as j}from"./chunk-GNT7AIZA.js";import"./chunk-LAI4YRFV.js";import{g as N,l as H,x as V}from"./chunk-I6FKYEZO.js";import{$b as I,Cb as w,Ib as f,Kb as v,Qa as d,Ra as u,Wb as r,Xb as _,Yb as M,ac as F,bc as D,db as C,dc as A,jb as h,la as E,nb as p,od as k,rb as g,ua as S,ub as T,va as x,vb as y,wb as i,xb as n,yb as b}from"./chunk-W3KPMJ6O.js";import"./chunk-REZWHGN7.js";var B=(a,l)=>l.id;function G(a,l){if(a&1){let s=w();i(0,"tr",13)(1,"th",15),r(2),n(),i(3,"td"),r(4),n(),i(5,"td")(6,"span",16),r(7),n()(),i(8,"td")(9,"button",17),f("click",function(){let t=S(s).$implicit,o=v(2);return x(o.toggleModule(t.id,t.isEnabled))}),b(10,"i"),r(11),n()()()}if(a&2){let s=l.$implicit;d(2),_(s.id),d(2),_(s.name),d(2),p(s.isEnabled?"bg-success":"bg-danger"),d(),M(" ",s.isEnabled?"Habilitado":"Deshabilitado"," "),d(2),p(s.isEnabled?"btn-warning":"btn-success"),d(),p(s.isEnabled?"fe fe-x":"fe fe-check"),d(),M(" ",s.isEnabled?"Deshabilitar":"Habilitar"," ")}}function R(a,l){if(a&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),r(5,"M\xF3dulos Disponibles"),n()(),i(6,"div",6)(7,"div",11)(8,"table",12)(9,"thead")(10,"tr",13)(11,"th",14),r(12,"ID"),n(),i(13,"th",14),r(14,"Nombre del M\xF3dulo"),n(),i(15,"th",14),r(16,"Estado"),n(),i(17,"th",14),r(18,"Acciones"),n()()(),i(19,"tbody"),T(20,G,12,10,"tr",13,B),n()()()()()()()),a&2){let s=v();d(20),y(s.modules)}}function $(a,l){a&1&&(i(0,"div",1)(1,"div",18)(2,"div",19)(3,"span",20),r(4,"Cargando..."),n()()()())}var ie=(()=>{let l=class l{constructor(e,t){this.superAdminService=e,this.toastr=t,this.tenants=[],this.selectedTenantId=null,this.modules=[],this.loading=!1}ngOnInit(){this.loadTenants()}loadTenants(){this.superAdminService.getCompanies().subscribe({next:e=>{this.tenants=e},error:e=>{this.toastr.error("Error al cargar las empresas","Error"),console.error(e)}})}onTenantChange(e){this.selectedTenantId=e,this.loadModules(e)}loadModules(e){this.loading=!0,this.superAdminService.getEnabledModules(e).subscribe({next:t=>{this.modules=t.data?.modules||[],this.loading=!1},error:t=>{this.toastr.error("Error al cargar los m\xF3dulos","Error"),console.error(t),this.loading=!1}})}toggleModule(e,t){if(!this.selectedTenantId)return;let o=!t,m=this.modules.find(c=>c.id===e);m&&(m.isEnabled=o),this.superAdminService.updateModuleStatus(this.selectedTenantId,e,o).subscribe({next:c=>{this.toastr.success("M\xF3dulo actualizado correctamente","\xC9xito")},error:c=>{m&&(m.isEnabled=t),this.toastr.error("Error al actualizar el m\xF3dulo","Error"),console.error(c)}})}};l.\u0275fac=function(t){return new(t||l)(u(O),u(j))},l.\u0275cmp=E({type:l,selectors:[["app-modules"]],standalone:!0,features:[A],decls:16,vars:10,consts:[[3,"title","title2","class1","path"],[1,"row"],[1,"col-md-12"],[1,"card","custom-card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],["placeholder","Seleccione una empresa","bindValue","id","bindLabel","name",1,"form-control","custom-select","p-0",3,"ngModelChange","ngModel","items"],[1,"table-responsive"],[1,"table","mb-0","text-nowrap","text-md-nowrap","table-bordered","border"],[1,"border-bottom"],["scope","col"],["scope","row"],[1,"badge"],[1,"btn","btn-sm",3,"click"],[1,"col-md-12","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(t,o){t&1&&(b(0,"app-hr-dashboard-page-header",0),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),r(6,"Seleccionar Empresa"),n()(),i(7,"div",6)(8,"div",1)(9,"div",7)(10,"div",8)(11,"label",9),r(12,"Empresa"),n(),i(13,"ng-select",10),D("ngModelChange",function(c){return F(o.selectedTenantId,c)||(o.selectedTenantId=c),c}),f("ngModelChange",function(c){return o.onTenantChange(c)}),n()()()()()()()(),C(14,R,22,0,"div",1)(15,$,5,0,"div",1)),t&2&&(p("d-none"),h("title","Gesti\xF3n de M\xF3dulos")("title2","")("class1","")("path",""),d(13),I("ngModel",o.selectedTenantId),h("items",o.tenants),d(),g(o.selectedTenantId&&!o.loading?14:-1),d(),g(o.loading?15:-1))},dependencies:[L,z,k,W,P,V,N,H],styles:[".icon1[_ngcontent-%COMP%]{width:3rem;height:3rem;display:flex;align-items:center;justify-content:center;border-radius:50%;font-size:1.5rem}"]});let a=l;return a})();export{ie as ModulesComponent};
