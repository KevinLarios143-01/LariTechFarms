import{a as k}from"./chunk-DKVPDNA5.js";import"./chunk-USS2N3RB.js";import{c as j,n as O}from"./chunk-FYZLZUO4.js";import"./chunk-KAKXLQQZ.js";import"./chunk-Q4N2GC3M.js";import{r as N}from"./chunk-GNT7AIZA.js";import"./chunk-27TGOTIH.js";import{c as L,g as B,l as R,x as W}from"./chunk-BJ65GJZA.js";import{$b as y,Ib as b,Kb as v,Qa as o,Ra as g,Wb as a,Wc as P,Xb as l,Yb as C,Zb as M,ac as I,bc as T,db as E,dc as w,jb as H,kb as x,la as F,nb as u,rb as S,ub as f,vb as _,wb as t,xb as e,yb as h,yc as D}from"./chunk-W3KPMJ6O.js";import"./chunk-REZWHGN7.js";var A=(n,d)=>d.idLote,$=(n,d)=>d.calidad,G=(n,d)=>d.semana;function U(n,d){n&1&&(t(0,"div",7)(1,"div",9)(2,"span",10),a(3,"Cargando estad\xEDsticas..."),e()()())}function V(n,d){if(n&1&&(t(0,"tr")(1,"td",28),a(2),e(),t(3,"td"),a(4),e(),t(5,"td"),a(6),e(),t(7,"td"),a(8),e(),t(9,"td")(10,"div",29)(11,"div",30),a(12),e()()()()),n&2){let i=d.$implicit,s=v(2);o(2),l(i.galera),o(2),l(i.totalHuevos),o(2),l(i.promedioHuevos.toFixed(1)),o(2),l(i.registros),o(3),x("width",i.totalHuevos/s.stats.totalHuevos*100,"%"),o(),C(" ",(i.totalHuevos/s.stats.totalHuevos*100).toFixed(1),"% ")}}function q(n,d){if(n&1&&(t(0,"div",26)(1,"div",31)(2,"span"),a(3),e(),t(4,"span",28),a(5),e()(),t(6,"div",32),h(7,"div",33),e()()),n&2){let i=d.$implicit,s=v(2);o(2),u(s.getCalidadBadgeClass(i.calidad)),o(),C(" ",i.calidad," "),o(2),M("",i.totalHuevos," (",s.getCalidadPercentage(i.totalHuevos).toFixed(1),"%)"),o(2),u("bg-"+(i.calidad==="Excelente"?"success":i.calidad==="Buena"?"info":i.calidad==="Regular"?"warning":"danger")),x("width",s.getCalidadPercentage(i.totalHuevos),"%")}}function z(n,d){if(n&1&&(t(0,"div",26)(1,"div",31)(2,"span",28),a(3),e(),t(4,"div")(5,"span",34),a(6),e(),t(7,"span"),a(8),e()()(),t(9,"div",32),h(10,"div",35),e()()),n&2){let i=d.$implicit,s=v(3);o(3),l(i.semana),o(3),l(i.totalHuevos),o(),u(s.getCalidadBadgeClass(i.promedioCalidad)),o(),C(" ",i.promedioCalidad," "),o(2),x("width",i.totalHuevos/s.stats.totalHuevos*100,"%")}}function J(n,d){if(n&1&&f(0,z,11,7,"div",26,G),n&2){let i=v(2);_(i.stats.tendenciaSemanal)}}function K(n,d){n&1&&(t(0,"p",27),a(1,"No hay datos de tendencia semanal disponibles"),e())}function Q(n,d){if(n&1&&(t(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"h5",15),a(5),e(),t(6,"p",16),a(7,"Total Huevos"),e()()()(),t(8,"div",12)(9,"div",13)(10,"div",14)(11,"h5",17),a(12),e(),t(13,"p",16),a(14,"Total Registros"),e()()()(),t(15,"div",12)(16,"div",13)(17,"div",14)(18,"h5",18),a(19),e(),t(20,"p",16),a(21,"Promedio por D\xEDa"),e()()()(),t(22,"div",12)(23,"div",13)(24,"div",14)(25,"h5",19),a(26),e(),t(27,"p",16),a(28,"Promedio por Registro"),e()()()()(),t(29,"div",11)(30,"div",20)(31,"div",21)(32,"div",22)(33,"h6",23),a(34,"Producci\xF3n por Lote"),e()(),t(35,"div",14)(36,"div",24)(37,"table",25)(38,"thead")(39,"tr")(40,"th"),a(41,"Galera"),e(),t(42,"th"),a(43,"Total Huevos"),e(),t(44,"th"),a(45,"Promedio"),e(),t(46,"th"),a(47,"Registros"),e(),t(48,"th"),a(49,"Rendimiento"),e()()(),t(50,"tbody"),f(51,V,13,7,"tr",null,A),e()()()()()()(),t(53,"div",11)(54,"div",3)(55,"div",21)(56,"div",22)(57,"h6",23),a(58,"Distribuci\xF3n por Calidad"),e()(),t(59,"div",14),f(60,q,8,9,"div",26,$),e()()(),t(62,"div",3)(63,"div",21)(64,"div",22)(65,"h6",23),a(66,"Tendencia Semanal"),e()(),t(67,"div",14),E(68,J,2,0)(69,K,2,0,"p",27),e()()()()),n&2){let i=v();o(5),l(i.stats.totalHuevos),o(7),l(i.stats.totalRegistros),o(7),l(i.stats.promedioHuevosPorDia.toFixed(1)),o(7),l((i.stats.totalHuevos/i.stats.totalRegistros).toFixed(1)),o(25),_(i.stats.produccionPorLote),o(9),_(i.stats.produccionPorCalidad),o(8),S(i.stats.tendenciaSemanal&&i.stats.tendenciaSemanal.length>0?68:69)}}function X(n,d){n&1&&(t(0,"div",8),h(1,"i",36),a(2," No hay datos disponibles para el per\xEDodo seleccionado. "),e())}var de=(()=>{let d=class d{constructor(s,c,r){this.huevosService=s,this.cdr=c,this.toastr=r,this.stats=null,this.isLoading=!1,this.fechaInicio="",this.fechaFin="";let p=new Date,m=new Date(p.getTime()-30*24*60*60*1e3);this.fechaFin=p.toISOString().split("T")[0],this.fechaInicio=m.toISOString().split("T")[0]}ngOnInit(){this.loadStats()}loadStats(){this.isLoading=!0;let s={fechaInicio:this.fechaInicio,fechaFin:this.fechaFin};this.huevosService.getStats(s).subscribe({next:c=>{this.stats=c.data,this.isLoading=!1,this.cdr.detectChanges()},error:c=>{this.toastr.error("Error al cargar estad\xEDsticas","Error",{progressBar:!0,closeButton:!0}),this.isLoading=!1,this.cdr.detectChanges()}})}onDateChange(){this.fechaInicio&&this.fechaFin&&this.loadStats()}getCalidadBadgeClass(s){switch(s){case"Excelente":return"badge bg-success";case"Buena":return"badge bg-info";case"Regular":return"badge bg-warning";case"Mala":return"badge bg-danger";default:return"badge bg-secondary"}}getCalidadPercentage(s){return!this.stats||this.stats.totalHuevos===0?0:s/this.stats.totalHuevos*100}};d.\u0275fac=function(c){return new(c||d)(g(k),g(D),g(N))},d.\u0275cmp=F({type:d,selectors:[["app-estadisticas"]],standalone:!0,features:[w],decls:19,vars:9,consts:[[3,"title","title2","class1","path"],[1,"container-fluid"],[1,"row","mb-3"],[1,"col-md-6"],[1,"row"],[1,"form-label"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"text-center"],[1,"alert","alert-info"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"row","mb-4"],[1,"col-md-3"],[1,"card","text-center"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text"],[1,"card-title","text-info"],[1,"card-title","text-success"],[1,"card-title","text-warning"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"table-responsive"],[1,"table","table-striped"],[1,"mb-3"],[1,"text-muted"],[1,"fw-bold"],[1,"progress",2,"height","20px"],[1,"progress-bar","bg-success"],[1,"d-flex","justify-content-between","align-items-center","mb-1"],[1,"progress"],[1,"progress-bar"],[1,"badge","bg-primary","me-2"],[1,"progress-bar","bg-primary"],[1,"fas","fa-info-circle"]],template:function(c,r){c&1&&(h(0,"app-hr-dashboard-page-header",0),t(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4"),a(5,"Dashboard de Producci\xF3n de Huevos"),e()(),t(6,"div",3)(7,"div",4)(8,"div",3)(9,"label",5),a(10,"Fecha Inicio"),e(),t(11,"input",6),T("ngModelChange",function(m){return I(r.fechaInicio,m)||(r.fechaInicio=m),m}),b("change",function(){return r.onDateChange()}),e()(),t(12,"div",3)(13,"label",5),a(14,"Fecha Fin"),e(),t(15,"input",6),T("ngModelChange",function(m){return I(r.fechaFin,m)||(r.fechaFin=m),m}),b("change",function(){return r.onDateChange()}),e()()()()(),E(16,U,4,0,"div",7)(17,Q,70,5)(18,X,3,0,"div",8),e()),c&2&&(u("btn btn-outline-primary"),H("title","Dashboard de Huevos")("title2","Lista de Controles")("class1","")("path","../list"),o(11),y("ngModel",r.fechaInicio),o(4),y("ngModel",r.fechaFin),o(),S(r.isLoading?16:r.stats?17:18))},dependencies:[P,W,L,B,R,O,j]});let n=d;return n})();export{de as EstadisticasComponent};
