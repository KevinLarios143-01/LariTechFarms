import{a as K}from"./chunk-JMUEYSLK.js";import{a as J}from"./chunk-IORNA22M.js";import{c as P,n as z}from"./chunk-L55BPN5T.js";import"./chunk-Q7QIC4CI.js";import"./chunk-PMH5YGMK.js";import{r as B}from"./chunk-LPZBSW5G.js";import"./chunk-7UKZCJ6U.js";import{c as j,e as d,g as w,h as D,m as q,o as G,p as k,q as M,r as O,s as V,u as H,w as R}from"./chunk-BVMR5GE6.js";import{Ib as C,Qa as a,Ra as f,Vb as n,Zb as N,_c as $,cc as T,db as u,ea as F,ha as x,jb as h,jd as L,la as U,nb as y,r as _,rb as c,ub as I,vb as A,wb as o,xb as e,yb as m}from"./chunk-KFCCYZAB.js";import"./chunk-REZWHGN7.js";var Q=(()=>{let r=class r{constructor(t){this.http=t,this.apiUrl=`${J.apiUrl}/v1`}getEmpleados(){return this.http.get(`${this.apiUrl}/empleados`).pipe(_(t=>t.data.data))}createEmpleado(t){return this.http.post(`${this.apiUrl}/empleados`,t)}updateEmpleado(t){return this.http.put(`${this.apiUrl}/empleados/${t.id}`,t)}deleteEmpleado(t){return this.http.delete(`${this.apiUrl}/empleados/${t}`).pipe(_(()=>!0))}getEmpleadoById(t){return this.http.get(`${this.apiUrl}/empleados/${t}`)}};r.\u0275fac=function(s){return new(s||r)(x($))},r.\u0275prov=F({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();var Y=(i,r)=>r.id;function Z(i,r){i&1&&(o(0,"div",12),n(1," El nombre es requerido (m\xEDnimo 2 caracteres) "),e())}function ee(i,r){i&1&&(o(0,"div",12),n(1," El apellido es requerido (m\xEDnimo 2 caracteres) "),e())}function te(i,r){i&1&&(o(0,"div",12),n(1," Ingrese un email v\xE1lido "),e())}function ie(i,r){if(i&1&&(o(0,"option",20),n(1),e()),i&2){let b=r.$implicit;h("value",b.id),a(),N("",b.nombre," ",b.apellido," - ID: ",b.id,"")}}function re(i,r){i&1&&(o(0,"div",12),n(1," La contrase\xF1a es requerida (m\xEDnimo 6 caracteres) "),e())}function oe(i,r){i&1&&(o(0,"div",12),n(1," Seleccione un rol "),e())}function ne(i,r){i&1&&(m(0,"span",33),n(1," Guardando... "))}function le(i,r){i&1&&n(0," Guardar Usuario ")}var be=(()=>{let r=class r{constructor(t,s,l,p,v){this.fb=t,this.router=s,this.usuarioService=l,this.empleadoService=p,this.toastr=v,this.isLoading=!1,this.empleados=[]}ngOnInit(){this.initForm(),this.loadEmpleados()}initForm(){this.userForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],nombre:["",[d.required,d.minLength(2)]],apellido:["",[d.required,d.minLength(2)]],rol:["",[d.required]],id_empleado:[null]})}onSubmit(){this.userForm.valid&&(this.isLoading=!0,this.usuarioService.crearUsuario(this.userForm.value).subscribe({next:t=>{console.log("Usuario creado exitosamente:",t),this.toastr.success("Usuario creado exitosamente","\xC9xito",{timeOut:3e3,positionClass:"toast-top-right"}),this.router.navigate(["/dashboard/hrmdashboards/users/user-list"])},error:t=>{console.error("Error al crear usuario:",t),this.toastr.error("Error al crear usuario: "+(t.error?.message||"Error desconocido"),"Error",{timeOut:3e3,positionClass:"toast-top-right"}),this.isLoading=!1}}))}loadEmpleados(){this.empleadoService.getEmpleados().subscribe({next:t=>{this.empleados=t},error:t=>{console.error("Error al cargar empleados:",t),this.toastr.error("Error al cargar la lista de empleados","Error")}})}onCancel(){this.router.navigate(["/dashboard/hrmdashboards/users/user-list"])}};r.\u0275fac=function(s){return new(s||r)(f(H),f(L),f(K),f(Q),f(B))},r.\u0275cmp=U({type:r,selectors:[["app-add-user"]],standalone:!0,features:[T],decls:73,vars:14,consts:[[3,"title","title2","class1","path"],[1,"row"],[1,"col-xl-12"],[1,"card","custom-card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"col-md-6"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],["type","text","formControlName","nombre","placeholder","Ingrese el nombre",1,"form-control"],[1,"invalid-feedback"],["for","apellido",1,"form-label"],["type","text","formControlName","apellido","placeholder","Ingrese el apellido",1,"form-control"],["for","email",1,"form-label"],["type","email","formControlName","email","placeholder","usuario@ejemplo.com",1,"form-control"],["for","id_empleado",1,"form-label"],["formControlName","id_empleado",1,"form-control"],["value",""],[3,"value"],["for","password",1,"form-label"],["type","password","formControlName","password","placeholder","Ingrese la contrase\xF1a",1,"form-control"],["for","rol",1,"form-label"],["formControlName","rol",1,"form-control"],["value","superadmin"],["value","admin"],["value","gerente"],["value","supervisor"],["value","operador"],[1,"col-12"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(s,l){if(s&1&&(m(0,"app-hr-dashboard-page-header",0),o(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),n(6,"Informaci\xF3n del Usuario"),e()(),o(7,"div",6)(8,"form",7),C("ngSubmit",function(){return l.onSubmit()}),o(9,"div",1)(10,"div",8)(11,"div",9)(12,"label",10),n(13,"Nombre *"),e(),m(14,"input",11),u(15,Z,2,0,"div",12),e()(),o(16,"div",8)(17,"div",9)(18,"label",13),n(19,"Apellido *"),e(),m(20,"input",14),u(21,ee,2,0,"div",12),e()()(),o(22,"div",1)(23,"div",8)(24,"div",9)(25,"label",15),n(26,"Email *"),e(),m(27,"input",16),u(28,te,2,0,"div",12),e()(),o(29,"div",8)(30,"div",9)(31,"label",17),n(32,"Empleado"),e(),o(33,"select",18)(34,"option",19),n(35,"Seleccione un empleado (opcional)"),e(),I(36,ie,2,4,"option",20,Y),e()()()(),o(38,"div",1)(39,"div",8)(40,"div",9)(41,"label",21),n(42,"Contrase\xF1a *"),e(),m(43,"input",22),u(44,re,2,0,"div",12),e()(),m(45,"div",8),e(),o(46,"div",1)(47,"div",8)(48,"div",9)(49,"label",23),n(50,"Rol *"),e(),o(51,"select",24)(52,"option",19),n(53,"Seleccione un rol"),e(),o(54,"option",25),n(55,"Super Administrador"),e(),o(56,"option",26),n(57,"Administrador"),e(),o(58,"option",27),n(59,"Gerente"),e(),o(60,"option",28),n(61,"Supervisor"),e(),o(62,"option",29),n(63,"Operador"),e()(),u(64,oe,2,0,"div",12),e()(),m(65,"div",8),e(),o(66,"div",1)(67,"div",30)(68,"button",31),u(69,ne,2,0)(70,le,1,0),e(),o(71,"button",32),C("click",function(){return l.onCancel()}),n(72," Cancelar "),e()()()()()()()()),s&2){let p,v,g,E,S;y("btn btn-secondary"),h("title","Agregar Usuario")("title2","Volver a Lista")("class1","")("path","/dashboard/hrmdashboards/users/user-list"),a(8),h("formGroup",l.userForm),a(7),c((p=l.userForm.get("nombre"))!=null&&p.invalid&&((p=l.userForm.get("nombre"))!=null&&p.touched)?15:-1),a(6),c((v=l.userForm.get("apellido"))!=null&&v.invalid&&((v=l.userForm.get("apellido"))!=null&&v.touched)?21:-1),a(7),c((g=l.userForm.get("email"))!=null&&g.invalid&&((g=l.userForm.get("email"))!=null&&g.touched)?28:-1),a(8),A(l.empleados),a(8),c((E=l.userForm.get("password"))!=null&&E.invalid&&((E=l.userForm.get("password"))!=null&&E.touched)?44:-1),a(20),c((S=l.userForm.get("rol"))!=null&&S.invalid&&((S=l.userForm.get("rol"))!=null&&S.touched)?64:-1),a(4),h("disabled",l.userForm.invalid||l.isLoading),a(),c(l.isLoading?69:70)}},dependencies:[z,P,R,q,O,V,j,M,w,D,G,k]});let i=r;return i})();export{be as AddUserComponent};
