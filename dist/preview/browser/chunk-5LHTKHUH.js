import{a as j}from"./chunk-JO3AOESQ.js";import"./chunk-IORNA22M.js";import{c as k,n as D}from"./chunk-XLGDB24R.js";import"./chunk-SNUM6ZIL.js";import"./chunk-HC3PXDFB.js";import{r as w}from"./chunk-GNT7AIZA.js";import"./chunk-5ILM3463.js";import"./chunk-MN5F6KP3.js";import{Ib as P,Kb as p,Qa as s,Ra as v,Wb as n,Wc as y,Xb as l,Yb as _,Zb as h,db as u,dc as I,jb as S,kb as x,la as C,nb as b,rb as g,ub as f,vb as E,wb as i,xb as e,yb as c,yc as T}from"./chunk-W3KPMJ6O.js";import"./chunk-REZWHGN7.js";var A=(a,o)=>o.categoria,F=(a,o)=>o.id;function M(a,o){a&1&&(i(0,"div",7)(1,"div",9)(2,"span",10),n(3,"Cargando estad\xEDsticas..."),e()()())}function L(a,o){if(a&1&&(i(0,"div",27)(1,"div",28)(2,"span",30),n(3),e(),i(4,"span",35),n(5),e()(),i(6,"div",31)(7,"div",36),n(8),e()()()),a&2){let t=o.$implicit,d=p(3);s(3),l(t.categoria),s(2),l(t._count.id),s(2),x("width",d.getPercentage(t._count.id,d.stats.totalProductos),"%"),s(),_(" ",d.getPercentage(t._count.id,d.stats.totalProductos).toFixed(1),"% ")}}function B(a,o){if(a&1&&f(0,L,9,5,"div",27,A),a&2){let t=p(2);E(t.stats.productosPorCategoria)}}function $(a,o){a&1&&(i(0,"p",23),n(1,"No hay datos de categor\xEDas disponibles"),e())}function H(a,o){if(a&1&&(i(0,"div",37)(1,"div",38)(2,"div")(3,"strong"),n(4),e(),c(5,"br"),i(6,"small",23),n(7),e()(),i(8,"span",39),n(9),e()()()),a&2){let t=o.$implicit;s(4),l(t.nombre),s(3),l(t.categoria),s(2),_("",t.stock," unidades")}}function N(a,o){if(a&1&&f(0,H,10,3,"div",37,F),a&2){let t=p(2);E(t.stats.stockBajo)}}function O(a,o){a&1&&(i(0,"div",24),c(1,"i",40),n(2," Todos los productos tienen stock adecuado "),e())}function z(a,o){if(a&1&&(i(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"h5",15),n(5),e(),i(6,"p",16),n(7,"Total Productos"),e()()()(),i(8,"div",12)(9,"div",13)(10,"div",14)(11,"h5",17),n(12),e(),i(13,"p",16),n(14,"Productos Activos"),e()()()(),i(15,"div",12)(16,"div",13)(17,"div",14)(18,"h5",18),n(19),e(),i(20,"p",16),n(21,"Productos Inactivos"),e()()()(),i(22,"div",12)(23,"div",13)(24,"div",14)(25,"h5",19),n(26),e(),i(27,"p",16),n(28,"Valor Total Inventario"),e()()()()(),i(29,"div",11)(30,"div",3)(31,"div",20)(32,"div",21)(33,"h6",22),n(34,"Productos por Categor\xEDa"),e()(),i(35,"div",14),u(36,B,2,0)(37,$,2,0,"p",23),e()()(),i(38,"div",3)(39,"div",20)(40,"div",21)(41,"h6",22),n(42,"Productos con Stock Bajo"),e()(),i(43,"div",14),u(44,N,2,0)(45,O,3,0,"div",24),e()()()(),i(46,"div",11)(47,"div",25)(48,"div",20)(49,"div",21)(50,"h6",22),n(51,"Estado de Productos"),e()(),i(52,"div",14)(53,"div",26)(54,"div",3)(55,"div",27)(56,"div",28)(57,"span",29),n(58,"Productos Activos"),e(),i(59,"span",30),n(60),e()(),i(61,"div",31),c(62,"div",32),e()()(),i(63,"div",3)(64,"div",27)(65,"div",28)(66,"span",33),n(67,"Productos Inactivos"),e(),i(68,"span",30),n(69),e()(),i(70,"div",31),c(71,"div",34),e()()()()()()()()),a&2){let t=p();s(5),l(t.stats.totalProductos),s(7),l(t.stats.productosActivos),s(7),l(t.stats.productosInactivos),s(7),_("$",t.stats.valorTotalInventario.toFixed(2),""),s(10),g(t.stats.productosPorCategoria&&t.stats.productosPorCategoria.length>0?36:37),s(8),g(t.stats.stockBajo&&t.stats.stockBajo.length>0?44:45),s(16),h("",t.stats.productosActivos," (",t.getPercentage(t.stats.productosActivos,t.stats.totalProductos).toFixed(1),"%)"),s(2),x("width",t.getPercentage(t.stats.productosActivos,t.stats.totalProductos),"%"),s(7),h("",t.stats.productosInactivos," (",t.getPercentage(t.stats.productosInactivos,t.stats.totalProductos).toFixed(1),"%)"),s(2),x("width",t.getPercentage(t.stats.productosInactivos,t.stats.totalProductos),"%")}}function R(a,o){a&1&&(i(0,"div",8),c(1,"i",41),n(2," No hay datos estad\xEDsticos disponibles. "),e())}var W=(()=>{let o=class o{constructor(d,r,m){this.productosService=d,this.cdr=r,this.toastr=m,this.stats=null,this.isLoading=!1}ngOnInit(){this.loadStats()}loadStats(){this.isLoading=!0,this.productosService.getStats().subscribe({next:d=>{this.stats=d.data,this.isLoading=!1,this.cdr.detectChanges()},error:d=>{this.toastr.error("Error al cargar estad\xEDsticas","Error",{progressBar:!0,closeButton:!0}),this.isLoading=!1,this.cdr.detectChanges()}})}getPercentage(d,r){return r===0?0:d/r*100}};o.\u0275fac=function(r){return new(r||o)(v(j),v(T),v(w))},o.\u0275cmp=C({type:o,selectors:[["app-estadisticas"]],standalone:!0,features:[I],decls:13,vars:7,consts:[[3,"title","title2","class1","path"],[1,"container-fluid"],[1,"row","mb-3"],[1,"col-md-6"],[1,"col-md-6","text-end"],[1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-sync-alt"],[1,"text-center"],[1,"alert","alert-info"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"row","mb-4"],[1,"col-md-3"],[1,"card","text-center"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text"],[1,"card-title","text-success"],[1,"card-title","text-danger"],[1,"card-title","text-info"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"text-muted"],[1,"alert","alert-success"],[1,"col-md-12"],[1,"row"],[1,"mb-3"],[1,"d-flex","justify-content-between","align-items-center","mb-1"],[1,"fw-bold","text-success"],[1,"fw-bold"],[1,"progress"],[1,"progress-bar","bg-success"],[1,"fw-bold","text-danger"],[1,"progress-bar","bg-danger"],[1,"badge","bg-primary"],[1,"progress-bar","bg-primary"],[1,"alert","alert-warning","mb-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"badge","bg-danger"],[1,"fas","fa-check-circle"],[1,"fas","fa-info-circle"]],template:function(r,m){r&1&&(c(0,"app-hr-dashboard-page-header",0),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4"),n(5,"Dashboard de Productos"),e()(),i(6,"div",4)(7,"button",5),P("click",function(){return m.loadStats()}),c(8,"i",6),n(9," Actualizar "),e()()(),u(10,M,4,0,"div",7)(11,z,72,14)(12,R,3,0,"div",8),e()),r&2&&(b("btn btn-outline-primary"),S("title","Dashboard de Productos")("title2","Lista de Productos")("class1","")("path","../list"),s(10),g(m.isLoading?10:m.stats?11:12))},dependencies:[y,D,k]});let a=o;return a})();export{W as EstadisticasComponent};
