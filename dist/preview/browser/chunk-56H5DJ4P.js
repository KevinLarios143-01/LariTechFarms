import{a as O}from"./chunk-GOVRRGCU.js";import"./chunk-USS2N3RB.js";import{c as P,n as L}from"./chunk-44QSXYOT.js";import{b as W,c as z}from"./chunk-S5Y45Y7X.js";import"./chunk-PLAIHBDU.js";import{r as j}from"./chunk-GNT7AIZA.js";import"./chunk-LAI4YRFV.js";import{g as N,l as H,x as V}from"./chunk-I6FKYEZO.js";import{$b as I,Cb as w,Ib as f,Kb as v,Qa as s,Ra as u,Wb as r,Xb as _,Yb as M,ac as F,bc as k,db as C,dc as D,jb as h,la as E,nb as p,od as A,rb as g,ua as S,ub as T,va as x,vb as y,wb as i,xb as n,yb as b}from"./chunk-W3KPMJ6O.js";import"./chunk-REZWHGN7.js";var B=(a,l)=>l.id;function G(a,l){if(a&1){let c=w();i(0,"tr",13)(1,"th",15),r(2),n(),i(3,"td"),r(4),n(),i(5,"td")(6,"span",16),r(7),n()(),i(8,"td")(9,"button",17),f("click",function(){let e=S(c).$implicit,o=v(2);return x(o.toggleModule(e.id,e.isEnabled))}),b(10,"i"),r(11),n()()()}if(a&2){let c=l.$implicit;s(2),_(c.id),s(2),_(c.name),s(2),p(c.isEnabled?"bg-success":"bg-danger"),s(),M(" ",c.isEnabled?"Habilitado":"Deshabilitado"," "),s(2),p(c.isEnabled?"btn-warning":"btn-success"),s(),p(c.isEnabled?"fe fe-x":"fe fe-check"),s(),M(" ",c.isEnabled?"Deshabilitar":"Habilitar"," ")}}function R(a,l){if(a&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),r(5,"M\xF3dulos Disponibles"),n()(),i(6,"div",6)(7,"div",11)(8,"table",12)(9,"thead")(10,"tr",13)(11,"th",14),r(12,"ID"),n(),i(13,"th",14),r(14,"Nombre del M\xF3dulo"),n(),i(15,"th",14),r(16,"Estado"),n(),i(17,"th",14),r(18,"Acciones"),n()()(),i(19,"tbody"),T(20,G,12,10,"tr",13,B),n()()()()()()()),a&2){let c=v();s(20),y(c.modules)}}function $(a,l){a&1&&(i(0,"div",1)(1,"div",18)(2,"div",19)(3,"span",20),r(4,"Cargando..."),n()()()())}var ie=(()=>{let l=class l{constructor(t,e){this.superAdminService=t,this.toastr=e,this.tenants=[],this.selectedTenantId=null,this.modules=[],this.loading=!1}ngOnInit(){this.loadTenants()}loadTenants(){this.superAdminService.getCompanies().subscribe({next:t=>{this.tenants=t},error:t=>{this.toastr.error("Error al cargar las empresas","Error"),console.error(t)}})}onTenantChange(t){this.selectedTenantId=t,this.loadModules(t)}loadModules(t){this.loading=!0,this.superAdminService.getEnabledModules(t).subscribe({next:e=>{e.ok&&(this.modules=e.modules),this.loading=!1},error:e=>{this.toastr.error("Error al cargar los m\xF3dulos","Error"),console.error(e),this.loading=!1}})}toggleModule(t,e){if(!this.selectedTenantId)return;let o=!e,m=this.modules.find(d=>d.id===t);m&&(m.isEnabled=o),this.superAdminService.updateModuleStatus(this.selectedTenantId,t,o).subscribe({next:d=>{d.ok&&this.toastr.success(d.message,"\xC9xito")},error:d=>{m&&(m.isEnabled=e),this.toastr.error("Error al actualizar el m\xF3dulo","Error"),console.error(d)}})}};l.\u0275fac=function(e){return new(e||l)(u(O),u(j))},l.\u0275cmp=E({type:l,selectors:[["app-modules"]],standalone:!0,features:[D],decls:16,vars:10,consts:[[3,"title","title2","class1","path"],[1,"row"],[1,"col-md-12"],[1,"card","custom-card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],["placeholder","Seleccione una empresa","bindValue","id","bindLabel","name",1,"form-control","custom-select","p-0",3,"ngModelChange","ngModel","items"],[1,"table-responsive"],[1,"table","mb-0","text-nowrap","text-md-nowrap","table-bordered","border"],[1,"border-bottom"],["scope","col"],["scope","row"],[1,"badge"],[1,"btn","btn-sm",3,"click"],[1,"col-md-12","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(e,o){e&1&&(b(0,"app-hr-dashboard-page-header",0),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),r(6,"Seleccionar Empresa"),n()(),i(7,"div",6)(8,"div",1)(9,"div",7)(10,"div",8)(11,"label",9),r(12,"Empresa"),n(),i(13,"ng-select",10),k("ngModelChange",function(d){return F(o.selectedTenantId,d)||(o.selectedTenantId=d),d}),f("ngModelChange",function(d){return o.onTenantChange(d)}),n()()()()()()()(),C(14,R,22,0,"div",1)(15,$,5,0,"div",1)),e&2&&(p("d-none"),h("title","Gesti\xF3n de M\xF3dulos")("title2","")("class1","")("path",""),s(13),I("ngModel",o.selectedTenantId),h("items",o.tenants),s(),g(o.selectedTenantId&&!o.loading?14:-1),s(),g(o.loading?15:-1))},dependencies:[L,P,A,z,W,V,N,H],styles:[".icon1[_ngcontent-%COMP%]{width:3rem;height:3rem;display:flex;align-items:center;justify-content:center;border-radius:50%;font-size:1.5rem}"]});let a=l;return a})();export{ie as ModulesComponent};
