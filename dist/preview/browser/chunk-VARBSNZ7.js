import{a as x}from"./chunk-6JUWSPNM.js";import"./chunk-DFR7G4ST.js";import{c as B,n as q}from"./chunk-ZNKMRUWH.js";import{c as H}from"./chunk-XG7TRELF.js";import"./chunk-B56AIWNQ.js";import{r as R}from"./chunk-3DATYCE5.js";import"./chunk-EMEDTLE5.js";import"./chunk-XRHNCSTF.js";import{Cb as w,Ib as A,Kb as b,Na as U,Pc as P,Qa as r,Qc as N,Ra as g,Tc as V,Wb as i,Xb as l,Zb as L,cc as M,db as _,dc as k,fc as D,jb as u,la as S,ld as j,nb as h,nc as f,oc as T,od as O,pc as F,rb as I,ua as E,ub as $,va as y,vb as C,wb as e,xb as t,yb as m}from"./chunk-AZAYKVK3.js";import"./chunk-REZWHGN7.js";var z=(s,o)=>o.id,G=s=>["/dashboard/hrmdashboards/users/view-user",s];function J(s,o){if(s&1&&(e(0,"div",1)(1,"div",11)(2,"div",3)(3,"div",6)(4,"div",1)(5,"div",12)(6,"div",13)(7,"span",14),i(8,"Total Usuarios"),t(),e(9,"h3",15),i(10),t()()(),e(11,"div",16)(12,"div",17),m(13,"i",18),t()()()()()(),e(14,"div",11)(15,"div",3)(16,"div",6)(17,"div",1)(18,"div",12)(19,"div",13)(20,"span",14),i(21,"Usuarios Activos"),t(),e(22,"h3",19),i(23),t()()(),e(24,"div",16)(25,"div",20),m(26,"i",21),t()()()()()(),e(27,"div",11)(28,"div",3)(29,"div",6)(30,"div",1)(31,"div",12)(32,"div",13)(33,"span",14),i(34,"Usuarios Inactivos"),t(),e(35,"h3",22),i(36),t()()(),e(37,"div",16)(38,"div",23),m(39,"i",24),t()()()()()(),e(40,"div",11)(41,"div",3)(42,"div",6)(43,"div",1)(44,"div",12)(45,"div",13)(46,"span",14),i(47,"Nuevos Usuarios"),t(),e(48,"h3",25),i(49),t()()(),e(50,"div",16)(51,"div",26),m(52,"i",27),t()()()()()()()),s&2){let a=b();r(10),l(a.stats.totalUsuarios||0),r(13),l(a.stats.usuariosActivos||0),r(13),l(a.stats.usuariosInactivos||0),r(13),l(a.stats.usuariosNuevos||0)}}function K(s,o){if(s&1){let a=w();e(0,"tr",9)(1,"th",28),i(2),t(),e(3,"td")(4,"div",29)(5,"div",30),m(6,"img",31),t(),e(7,"div")(8,"div",32)(9,"h6",33),i(10),t()()()()(),e(11,"td"),i(12),t(),e(13,"td"),i(14),t(),e(15,"td"),i(16),f(17,"date"),t(),e(18,"td")(19,"span",34),i(20),t()(),e(21,"td")(22,"div",35)(23,"a",36),m(24,"i",37),t(),e(25,"a",38),A("click",function(){let d=E(a).$implicit,p=b();return y(p.toggleUsuarioStatus(d))}),m(26,"i"),t()()()()}if(s&2){let a=o.$implicit;r(2),l(a.id),r(4),u("src","./assets/images/laritechfarms/2.jpg",U),r(4),L("",a.nombre," ",a.apellido,""),r(2),l(a.email),r(2),l(a.rol),r(2),l(F(17,16,a.ultimoLogin,"short")),r(3),h(a.activo?"bg-success":"bg-danger"),r(),l(a.activo?"Activo":"Inactivo"),r(3),u("routerLink",D(19,G,a.id)),r(2),h(a.activo?"btn-warning":"btn-success"),u("title",a.activo?"Desactivar":"Activar"),r(),h(a.activo?"fe fe-user-x":"fe fe-user-check")}}var se=(()=>{let o=class o{constructor(n,d){this.userService=n,this.toastr=d,this.stats=null,this.userList$=n.userData$,this.total$=n.total$,this.loading$=n.loading$,this.obtenerStats()}obtenerStats(){this.stats$=this.userService.getUserStats(),this.stats$.subscribe({next:n=>{console.log("Stats received:",n),this.stats=n},error:n=>console.error("Error fetching stats:",n)})}ngOnInit(){}toggleUsuarioStatus(n){let d=n.activo,p=d?"desactivar":"activar";confirm(`\xBFEst\xE1 seguro de que desea ${p} este usuario?`)&&(d?this.userService.deactivateUsuario(n.id):this.userService.activateUsuario(n.id)).subscribe({next:()=>{this.toastr.success(`Usuario ${p}do exitosamente`,"\xC9xito",{timeOut:3e3,positionClass:"toast-top-right"}),this.userService._search$.next()},error:c=>{console.error("Error response:",c);let v="Error desconocido";c.error?.message?v=c.error.message:c.error?.error?v=c.error.error:c.message?v=c.message:typeof c.error=="string"&&(v=c.error),this.toastr.error(`Error al ${p} el usuario: ${v}`,"Error",{timeOut:3e3,positionClass:"toast-top-right"})}})}};o.\u0275fac=function(d){return new(d||o)(g(x),g(R))},o.\u0275cmp=S({type:o,selectors:[["app-user-list"]],standalone:!0,features:[M([x,V]),k],decls:31,vars:9,consts:[[3,"title","title2","class1","path"],[1,"row"],[1,"col-md-12"],[1,"card","custom-card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"table-responsive"],[1,"table","mb-0","text-nowrap","text-md-nowrap","table-bordered","border"],[1,"border-bottom"],["scope","col"],[1,"col-xl-3","col-lg-6","col-md-6"],[1,"col-7"],[1,"mt-0","text-start"],[1,"fw-medium"],[1,"mb-0","mt-1","text-success"],[1,"col-5"],[1,"icon1","bg-success-transparent","my-auto","float-end"],[1,"las","la-users"],[1,"mb-0","mt-1","text-primary"],[1,"icon1","bg-primary-transparent","my-auto","float-end"],[1,"las","la-user-check"],[1,"mb-0","mt-1","text-secondary"],[1,"icon1","bg-secondary-transparent","my-auto","float-end"],[1,"las","la-user-times"],[1,"mb-0","mt-1","text-danger"],[1,"icon1","bg-danger-transparent","my-auto","float-end"],[1,"las","la-user-plus"],["scope","row"],[1,"d-flex","align-items-center"],[1,"avatar","me-2","avatar-rounded"],["alt","img",3,"src"],[1,"lh-1"],[1,"mb-1"],[1,"badge"],[1,"d-flex","gap-2"],["data-bs-toggle","tooltip","title","Ver/Editar",1,"btn","btn-primary","btn-icon",3,"routerLink"],[1,"fe","fe-edit"],["data-bs-toggle","tooltip",1,"btn","btn-icon",3,"click","title"]],template:function(d,p){d&1&&(m(0,"app-hr-dashboard-page-header",0),_(1,J,53,4,"div",1),e(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),i(7,"Lista de usuarios"),t()(),e(8,"div",6)(9,"div",7)(10,"table",8)(11,"thead")(12,"tr",9)(13,"th",10),i(14,"ID"),t(),e(15,"th",10),i(16,"Usuario"),t(),e(17,"th",10),i(18,"Email"),t(),e(19,"th",10),i(20,"Rol"),t(),e(21,"th",10),i(22,"\xDAltimo Acceso"),t(),e(23,"th",10),i(24,"Estado"),t(),e(25,"th",10),i(26,"Acciones"),t()()(),e(27,"tbody"),$(28,K,27,21,"tr",9,z),f(30,"async"),t()()()()()()()),d&2&&(h("btn btn-primary"),u("title","Usuarios")("title2","Agregar Nuevo Usuario")("class1","")("path","/dashboard/hrmdashboards/users/add-user"),r(),I(p.stats?1:-1),r(27),C(T(30,7,p.userList$)))},dependencies:[q,B,O,j,H,P,N]});let s=o;return s})();export{se as UserListComponent};
