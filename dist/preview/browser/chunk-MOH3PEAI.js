import{a as A}from"./chunk-XSCBZSJQ.js";import"./chunk-USS2N3RB.js";import{n as N}from"./chunk-44QSXYOT.js";import"./chunk-S5Y45Y7X.js";import"./chunk-PLAIHBDU.js";import{r as j}from"./chunk-GNT7AIZA.js";import"./chunk-LAI4YRFV.js";import"./chunk-I6FKYEZO.js";import{Cb as E,Ib as S,Kb as m,Qa as l,Qc as P,Ra as v,Tc as D,Wb as i,Xb as c,Yb as s,db as u,dc as y,id as F,kd as M,la as V,nc as _,ob as I,pc as b,qc as k,rb as x,ua as h,ub as w,va as C,vb as T,wb as t,xb as e,yb as f,yc as B}from"./chunk-W3KPMJ6O.js";import"./chunk-REZWHGN7.js";var U=(a,o)=>o.id;function O(a,o){if(a&1){let n=E();t(0,"button",9),S("click",function(){h(n);let d=m();return C(d.generateTicket())}),f(1,"i",10),i(2,"Generar Ticket "),e(),t(3,"button",11),S("click",function(){h(n);let d=m();return C(d.editVenta())}),f(4,"i",12),i(5,"Editar "),e()}}function R(a,o){a&1&&(t(0,"div",7)(1,"div",13)(2,"span",14),i(3,"Cargando..."),e()()())}function q(a,o){if(a&1&&(t(0,"div",24)(1,"div",21)(2,"label",22),i(3,"Observaciones:"),e(),t(4,"p",23),i(5),e()()()),a&2){let n=m(2);l(5),c(n.venta.observaciones)}}function L(a,o){if(a&1&&(t(0,"div",27)(1,"span",28),f(2,"i",29),e(),t(3,"div")(4,"h6",30),i(5),e(),t(6,"span",26),i(7),e()()(),t(8,"div",21)(9,"label",22),i(10,"Tel\xE9fono:"),e(),t(11,"p",23),i(12),e()()),a&2){let n=m(2);l(5),c(n.venta.cliente.nombre),l(2),s("Cliente #",n.venta.cliente.id,""),l(5),c(n.venta.cliente.telefono||"No disponible")}}function $(a,o){a&1&&(t(0,"p",26),i(1,"Informaci\xF3n del cliente no disponible"),e())}function G(a,o){if(a&1&&(t(0,"tr")(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e(),t(7,"td"),i(8),_(9,"number"),e(),t(10,"td"),i(11),_(12,"number"),e()()),a&2){let n=o.$implicit;l(2),c(n.producto.nombre||"N/A"),l(2),c(n.producto.tamanio||"N/A"),l(2),c(n.cantidad),l(2),s("Q",b(9,5,n.precioUnitario,"1.2-2"),""),l(3),s("Q",b(12,8,n.subtotal,"1.2-2"),"")}}function z(a,o){if(a&1&&(t(0,"div",8)(1,"div",31)(2,"div",16)(3,"div",17)(4,"h4",18),i(5,"Detalle de Productos"),e()(),t(6,"div",19)(7,"div",32)(8,"table",33)(9,"thead")(10,"tr")(11,"th"),i(12,"Producto"),e(),t(13,"th"),i(14,"Tama\xF1o"),e(),t(15,"th"),i(16,"Cantidad"),e(),t(17,"th"),i(18,"Precio Unitario"),e(),t(19,"th"),i(20,"Subtotal"),e()()(),t(21,"tbody"),w(22,G,13,11,"tr",null,U),e(),t(24,"tfoot")(25,"tr",34)(26,"td",35)(27,"strong"),i(28,"Total:"),e()(),t(29,"td")(30,"strong"),i(31),_(32,"number"),e()()()()()()()()()()),a&2){let n=m(2);l(22),T(n.venta.detalleVentas),l(9),s("Q",b(32,1,n.venta.total,"1.2-2"),"")}}function H(a,o){if(a&1&&(t(0,"div",8)(1,"div",15)(2,"div",16)(3,"div",17)(4,"h4",18),i(5,"Informaci\xF3n de la Venta"),e()(),t(6,"div",19)(7,"div",8)(8,"div",20)(9,"div",21)(10,"label",22),i(11,"ID de Venta:"),e(),t(12,"p",23),i(13),e()()(),t(14,"div",20)(15,"div",21)(16,"label",22),i(17,"Estado:"),e(),t(18,"p",23)(19,"span"),i(20),e()()()(),t(21,"div",20)(22,"div",21)(23,"label",22),i(24,"Fecha:"),e(),t(25,"p",23),i(26),_(27,"date"),e()()(),t(28,"div",20)(29,"div",21)(30,"label",22),i(31,"Total:"),e(),t(32,"p",23),i(33),_(34,"number"),e()()(),t(35,"div",20)(36,"div",21)(37,"label",22),i(38,"M\xE9todo de Pago:"),e(),t(39,"p",23),i(40),e()()(),t(41,"div",20)(42,"div",21)(43,"label",22),i(44,"Usuario:"),e(),t(45,"p",23),i(46),e()()(),u(47,q,6,1,"div",24),e()()()(),t(48,"div",25)(49,"div",16)(50,"div",17)(51,"h4",18),i(52,"Informaci\xF3n del Cliente"),e()(),t(53,"div",19),u(54,L,13,3)(55,$,2,0,"p",26),e()()()(),u(56,z,33,4,"div",8)),a&2){let n=m();l(13),s("#VT-",n.venta.id.toString().padStart(3,"0"),""),l(6),I("badge bg-",n.getStatusClass(n.venta.estado),"-transparent"),l(),c(n.venta.estado),l(6),c(k(27,12,n.venta.fecha,"dd/MM/yyyy","UTC")),l(7),s("Q",b(34,16,n.venta.total,"1.2-2"),""),l(7),c(n.venta.metodoPago||"No especificado"),l(6),c((n.venta.usuario==null?null:n.venta.usuario.nombre)||"N/A"),l(),x(n.venta.observaciones?47:-1),l(7),x(n.venta.cliente?54:55),l(2),x(n.venta.detalleVentas&&n.venta.detalleVentas.length>0?56:-1)}}function J(a,o){if(a&1){let n=E();t(0,"div",8)(1,"div",36)(2,"div",16)(3,"div",37),f(4,"i",38),t(5,"h4"),i(6,"Venta no encontrada"),e(),t(7,"p",26),i(8,"La venta solicitada no existe o no se pudo cargar."),e(),t(9,"button",11),S("click",function(){h(n);let d=m();return C(d.goBack())}),i(10,"Volver a la lista"),e()()()()()}}var te=(()=>{let o=class o{constructor(r,d,p,g,Q){this.route=r,this.router=d,this.ventaService=p,this.toastr=g,this.cdr=Q,this.venta=null,this.loading=!1,this.ventaId=0}ngOnInit(){this.route.params.subscribe(r=>{this.ventaId=+r.id,this.ventaId&&this.loadVenta()})}loadVenta(){this.loading=!0,this.ventaService.getVentaById(this.ventaId).subscribe({next:r=>{this.venta=r?.data||null,this.loading=!1,this.cdr.detectChanges()},error:r=>{console.error("Error loading venta:",r),this.toastr.error("Error al cargar la venta","Error",{timeOut:3e3,positionClass:"toast-top-right",progressBar:!0,closeButton:!0}),this.loading=!1,this.cdr.detectChanges()}})}goBack(){this.router.navigate(["/dashboard/business-dashboard/sell-list"])}editVenta(){this.router.navigate(["/dashboard/business-dashboard/new-sell"],{queryParams:{id:this.ventaId,mode:"edit"}})}generateTicket(){this.router.navigate(["/dashboard/business-dashboard/new-ticket"],{queryParams:{ventaId:this.ventaId}})}getStatusClass(r){switch(r?.toLowerCase()){case"completada":return"success";case"pendiente":return"warning";case"cancelada":return"danger";default:return"secondary"}}};o.\u0275fac=function(d){return new(d||o)(v(F),v(M),v(A),v(j),v(B))},o.\u0275cmp=V({type:o,selectors:[["app-view-sell"]],standalone:!0,features:[y],decls:13,vars:2,consts:[[1,"page-header","d-lg-flex","d-block"],[1,"page-leftheader"],[1,"page-title"],[1,"page-rightheader"],[1,"btn-list","d-flex","gap-1"],[1,"btn","btn-outline-primary",3,"click"],[1,"fe","fe-arrow-left","fs-12","my-auto","me-2"],[1,"text-center","py-4"],[1,"row"],[1,"btn","btn-info",3,"click"],[1,"fe","fe-file-plus","fs-12","my-auto","me-2"],[1,"btn","btn-primary",3,"click"],[1,"fe","fe-edit-2","fs-12","my-auto","me-2"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"col-xl-8","col-md-12","col-lg-8"],[1,"card","custom-card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],[1,"form-control-static"],[1,"col-md-12"],[1,"col-xl-4","col-md-12","col-lg-4"],[1,"text-muted"],[1,"d-flex","align-items-center","mb-3"],[1,"avatar","avatar-lg","me-3","avatar-rounded","bg-primary-transparent"],[1,"fe","fe-user","fs-18"],[1,"mb-1"],[1,"col-xl-12"],[1,"table-responsive"],[1,"table","table-vcenter","text-nowrap","table-bordered"],[1,"table-active"],["colspan","4",1,"text-end"],[1,"col-12"],[1,"card-body","text-center","py-5"],[1,"fe","fe-alert-circle","fs-48","text-muted","mb-3"]],template:function(d,p){d&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),i(3,"Detalle de Venta"),e()(),t(4,"div",3)(5,"div",4)(6,"button",5),S("click",function(){return p.goBack()}),f(7,"i",6),i(8,"Volver "),e(),u(9,O,6,0),e()()(),u(10,R,4,0,"div",7)(11,H,57,19)(12,J,11,0,"div",8)),d&2&&(l(9),x(p.venta?9:-1),l(),x(p.loading?10:p.venta?11:12))},dependencies:[N,P,D]});let a=o;return a})();export{te as ViewSellComponent};
