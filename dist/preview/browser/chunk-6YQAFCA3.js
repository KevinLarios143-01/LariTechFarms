import{a as G}from"./chunk-JO3AOESQ.js";import"./chunk-IORNA22M.js";import{c as O,n as z}from"./chunk-XLGDB24R.js";import{a as Q,b as q,c as $}from"./chunk-SNUM6ZIL.js";import"./chunk-HC3PXDFB.js";import{r as H}from"./chunk-GNT7AIZA.js";import"./chunk-5ILM3463.js";import{c as V,g as D,l as R,x as W}from"./chunk-MN5F6KP3.js";import{$b as T,Cb as L,Ib as S,Kb as h,Qa as n,Ra as u,Wb as r,Wc as F,Xb as m,Yb as v,ac as k,bc as I,db as _,dc as M,fc as b,jb as p,la as E,ld as N,nb as g,od as j,rb as P,ua as C,ub as w,va as y,vb as A,wb as t,xb as e,yb as c,yc as B}from"./chunk-W3KPMJ6O.js";import"./chunk-REZWHGN7.js";var J=(a,l)=>l.id,K=a=>["/dashboard/production-dashboard/productos/view",a],U=a=>["/dashboard/production-dashboard/productos/edit",a];function X(a,l){a&1&&(t(0,"tr")(1,"td",46)(2,"div",47)(3,"span",48),r(4,"Cargando..."),e()(),t(5,"div",49),r(6,"Cargando productos..."),e()()())}function Y(a,l){a&1&&(t(0,"tr")(1,"td",50),r(2," No se encontraron productos "),e()())}function Z(a,l){if(a&1){let d=L();t(0,"tr",38)(1,"th",51),r(2),e(),t(3,"td")(4,"div",26)(5,"div",52),c(6,"i",53),e(),t(7,"div")(8,"div",54)(9,"h6",55),r(10),e()(),t(11,"div",54)(12,"span",56),r(13),e()()()()(),t(14,"td",57),r(15),e(),t(16,"td")(17,"span",58),r(18),e()(),t(19,"td"),r(20),e(),t(21,"td")(22,"span",58),r(23),e()(),t(24,"td")(25,"div",59)(26,"a",60),c(27,"i",61),e(),t(28,"a",62),c(29,"i",63),e(),t(30,"a",64),S("click",function(){let s=C(d).$implicit,o=h(2);return y(o.deleteProducto(s.id))}),c(31,"i",65),e()()()()}if(a&2){let d=l.$implicit,i=h(2);n(2),m(d.id),n(8),m(d.nombre),n(3),m(d.tamanio||"Tama\xF1o est\xE1ndar"),n(2),v("Q",(+d.precio).toFixed(2),""),n(2),g(i.getStockBadgeClass(d.stock)),n(),v(" ",d.stock," unidades "),n(2),m(d.categoria||"Sin categor\xEDa"),n(2),g(d.activo?"bg-success":"bg-danger"),n(),m(d.activo?"Activo":"Inactivo"),n(3),p("routerLink",b(13,K,d.id)),n(2),p("routerLink",b(15,U,d.id))}}function tt(a,l){if(a&1&&w(0,Z,32,17,"tr",38,J),a&2){let d=h();A(d.filteredProductos)}}var pt=(()=>{let l=class l{constructor(i,s,o){this.productosService=i,this.cdr=s,this.toastr=o,this.productos=[],this.filteredProductos=[],this.categorias=[],this.isLoading=!1,this.searchTerm="",this.selectedCategoria="",this.selectedActivo="",this.estados=[{value:"true",label:"Activo"},{value:"false",label:"Inactivo"}]}ngOnInit(){this.loadProductos(),this.loadCategorias()}loadProductos(){this.isLoading=!0,this.productosService.getProductos().subscribe({next:i=>{i?.data?.data&&Array.isArray(i.data.data)?this.productos=i.data.data:i?.data?.items&&Array.isArray(i.data.items)?this.productos=i.data.items:i?.data&&Array.isArray(i.data)?this.productos=i.data:Array.isArray(i)?this.productos=i:this.productos=[],this.filteredProductos=[...this.productos],this.isLoading=!1,this.cdr.detectChanges()},error:i=>{this.productos=[],this.filteredProductos=[],this.toastr.error("Error al cargar productos","Error",{progressBar:!0,closeButton:!0}),this.isLoading=!1,this.cdr.detectChanges()}})}loadCategorias(){this.productosService.getCategorias().subscribe({next:i=>{this.categorias=Array.isArray(i.data)?i.data.map(s=>s.categoria):[],this.cdr.detectChanges()},error:i=>{this.categorias=[],console.error("Error al cargar categor\xEDas:",i)}})}applyFilters(){this.filteredProductos=this.productos.filter(i=>{let s=!this.searchTerm||i.nombre.toLowerCase().includes(this.searchTerm.toLowerCase())||i.categoria?.toLowerCase().includes(this.searchTerm.toLowerCase()),o=!this.selectedCategoria||i.categoria===this.selectedCategoria,f=!this.selectedActivo||i.activo.toString()===this.selectedActivo;return s&&o&&f}),this.cdr.detectChanges()}deleteProducto(i){confirm("\xBFEst\xE1 seguro de eliminar este producto?")&&this.productosService.deleteProducto(i).subscribe({next:()=>{this.toastr.success("Producto eliminado exitosamente","\xC9xito",{progressBar:!0,closeButton:!0}),setTimeout(()=>{this.loadProductos()},1e3)},error:()=>{this.toastr.error("Error al eliminar producto","Error",{progressBar:!0,closeButton:!0})}})}getStockClass(i){return i<=50?"text-danger":i<=100?"text-warning":"text-success"}getActivoClass(i){return i?"text-success":"text-danger"}clearFilters(){this.searchTerm="",this.selectedCategoria="",this.selectedActivo="",this.filteredProductos=[...this.productos],this.cdr.detectChanges()}getProductosActivos(){return this.productos.filter(i=>i.activo).length}getStockBajo(){return this.productos.filter(i=>i.stock<=50).length}getValorTotal(){return this.productos.reduce((s,o)=>s+ +o.precio*o.stock,0).toFixed(2)}getStockBadgeClass(i){return i<=50?"bg-danger":i<=100?"bg-warning":"bg-success"}getStockBadgeColor(i){return i<=50?"danger":i<=100?"warning":"success"}};l.\u0275fac=function(s){return new(s||l)(u(G),u(B),u(H))},l.\u0275cmp=E({type:l,selectors:[["app-producto-list"]],standalone:!0,features:[M],decls:121,vars:12,consts:[[3,"title","title2","class1","path"],[1,"row"],[1,"col-xl-3","col-lg-6","col-md-6"],[1,"card","custom-card"],[1,"card-body"],[1,"col-7"],[1,"mt-0","text-start"],[1,"fw-medium"],[1,"mb-0","mt-1","text-success"],[1,"col-5"],[1,"icon1","bg-success-transparent","my-auto","float-end"],[1,"las","la-box"],[1,"mb-0","mt-1","text-primary"],[1,"icon1","bg-primary-transparent","my-auto","float-end"],[1,"las","la-check-circle"],[1,"mb-0","mt-1","text-warning"],[1,"icon1","bg-warning-transparent","my-auto","float-end"],[1,"las","la-exclamation-triangle"],[1,"mb-0","mt-1","text-info"],[1,"icon1","bg-info-transparent","my-auto","float-end"],[1,"las","la-coins"],[1,"col-md-12"],[1,"card-header"],[1,"card-title"],[1,"row","mb-2","gap-2","gap-lg-0"],[1,"col-lg-6"],[1,"d-flex","align-items-center"],[1,"d-flex","ms-2","mx-2"],[1,"form-group","mb-0"],["name","quantity","id","select-countries17","placeholder","10","data-trigger","",1,"form-control","wd-150","p-0"],["value","1","selected",""],["value","2"],["value","3"],["value","4"],[1,"float-end"],["type","text","placeholder","Buscar",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"table-responsive"],[1,"table","mb-0","text-nowrap","text-md-nowrap","table-bordered","border"],[1,"border-bottom"],["scope","col"],[1,"mt-4"],[1,"pagination","justify-content-end","mb-0"],[1,"page-item","disabled"],["href","javascript:void(0);",1,"page-link"],[1,"page-item","active"],[1,"page-item"],["colspan","7",1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],["colspan","7",1,"text-center","py-4","text-muted"],["scope","row"],[1,"avatar","me-2","avatar-rounded","bg-primary-transparent"],[1,"fe","fe-box","fs-16"],[1,"lh-1"],[1,"mb-1"],[1,"fs-12","text-muted"],[1,"fw-bold","text-primary"],[1,"badge"],[1,"d-flex","gap-2"],["data-bs-toggle","tooltip","title","Ver Producto",1,"btn","btn-primary","btn-icon",3,"routerLink"],[1,"fe","fe-eye"],["data-bs-toggle","tooltip","title","Editar",1,"btn","btn-warning","btn-icon",3,"routerLink"],[1,"fe","fe-edit-2"],["data-bs-toggle","tooltip","title","Eliminar",1,"btn","btn-danger","btn-icon",3,"click"],[1,"fe","fe-trash"]],template:function(s,o){s&1&&(c(0,"app-hr-dashboard-page-header",0),t(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5)(7,"div",6)(8,"span",7),r(9,"Total Productos"),e(),t(10,"h3",8),r(11),e()()(),t(12,"div",9)(13,"div",10),c(14,"i",11),e()()()()()(),t(15,"div",2)(16,"div",3)(17,"div",4)(18,"div",1)(19,"div",5)(20,"div",6)(21,"span",7),r(22,"Productos Activos"),e(),t(23,"h3",12),r(24),e()()(),t(25,"div",9)(26,"div",13),c(27,"i",14),e()()()()()(),t(28,"div",2)(29,"div",3)(30,"div",4)(31,"div",1)(32,"div",5)(33,"div",6)(34,"span",7),r(35,"Stock Bajo"),e(),t(36,"h3",15),r(37),e()()(),t(38,"div",9)(39,"div",16),c(40,"i",17),e()()()()()(),t(41,"div",2)(42,"div",3)(43,"div",4)(44,"div",1)(45,"div",5)(46,"div",6)(47,"span",7),r(48,"Valor Inventario"),e(),t(49,"h3",18),r(50),e()()(),t(51,"div",9)(52,"div",19),c(53,"i",20),e()()()()()()(),t(54,"div",1)(55,"div",21)(56,"div",3)(57,"div",22)(58,"h3",23),r(59,"Lista de productos"),e()(),t(60,"div",4)(61,"div",24)(62,"div",25)(63,"div",26)(64,"span"),r(65,"Mostrar"),e(),t(66,"div",27)(67,"div",28)(68,"ng-select",29)(69,"ng-option",30),r(70,"10"),e(),t(71,"ng-option",31),r(72,"25"),e(),t(73,"ng-option",32),r(74,"50"),e(),t(75,"ng-option",33),r(76,"100"),e()()()(),t(77,"span"),r(78,"registros"),e()()(),t(79,"div",25)(80,"div",34)(81,"input",35),I("ngModelChange",function(x){return k(o.searchTerm,x)||(o.searchTerm=x),x}),S("input",function(){return o.applyFilters()}),e()()()(),t(82,"div",36)(83,"table",37)(84,"thead")(85,"tr",38)(86,"th",39),r(87,"No"),e(),t(88,"th",39),r(89,"Producto"),e(),t(90,"th",39),r(91,"Precio"),e(),t(92,"th",39),r(93,"Stock"),e(),t(94,"th",39),r(95,"Categor\xEDa"),e(),t(96,"th",39),r(97,"Estado"),e(),t(98,"th",39),r(99,"Acciones"),e()()(),t(100,"tbody"),_(101,X,7,0,"tr")(102,Y,3,0,"tr")(103,tt,2,0),e()()(),t(104,"nav",40)(105,"ul",41)(106,"li",42)(107,"a",43),r(108,"Prev"),e()(),t(109,"li",44)(110,"a",43),r(111,"1"),e()(),t(112,"li",45)(113,"a",43),r(114,"2"),e()(),t(115,"li",45)(116,"a",43),r(117,"3"),e()(),t(118,"li",45)(119,"a",43),r(120,"Next"),e()()()()()()()()),s&2&&(g("btn btn-primary"),p("title","Productos")("title2","Agregar Nuevo Producto")("class1","")("path","/dashboard/production-dashboard/productos/new"),n(11),m(o.productos.length),n(13),m(o.getProductosActivos()),n(13),m(o.getStockBajo()),n(13),v("Q",o.getValorTotal(),""),n(31),T("ngModel",o.searchTerm),n(20),P(o.isLoading?101:o.filteredProductos.length===0?102:103))},dependencies:[F,j,N,W,V,D,R,$,q,Q,z,O]});let a=l;return a})();export{pt as ProductoListComponent};
