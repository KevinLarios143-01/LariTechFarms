import{a as H}from"./chunk-6GDQ2OUQ.js";import"./chunk-USS2N3RB.js";import{c as L,n as B}from"./chunk-FYZLZUO4.js";import"./chunk-KAKXLQQZ.js";import"./chunk-Q4N2GC3M.js";import{r as F}from"./chunk-GNT7AIZA.js";import"./chunk-27TGOTIH.js";import"./chunk-BJ65GJZA.js";import{Cb as V,Ib as g,Kb as h,Na as I,Qa as n,Qc as T,Ra as v,Wb as i,Xb as m,Yb as C,Zb as M,db as y,dc as k,id as j,jb as E,kd as A,la as w,nb as f,nc as S,pc as _,rb as U,ua as b,va as x,wb as e,xb as t,yb as p,yc as D}from"./chunk-W3KPMJ6O.js";import"./chunk-REZWHGN7.js";function O(l,d){if(l&1){let a=V();e(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),p(5,"img",6),t(),e(6,"h5",7),i(7),t(),e(8,"p",8),i(9),t(),e(10,"span",9),i(11),t(),e(12,"div",10)(13,"button",11),g("click",function(){b(a);let r=h();return x(r.onEdit())}),p(14,"i",12),i(15," Editar "),t(),e(16,"button",13),g("click",function(){b(a);let r=h();return x(r.onToggleStatus())}),p(17,"i"),i(18),t()()()()(),e(19,"div",14)(20,"div",3)(21,"div",15)(22,"h3",16),i(23,"Informaci\xF3n del Usuario"),t()(),e(24,"div",17)(25,"div",1)(26,"div",18)(27,"div",19)(28,"label",20),i(29,"ID Usuario:"),t(),e(30,"p",21),i(31),t()()(),e(32,"div",18)(33,"div",19)(34,"label",22),i(35,"Email:"),t(),e(36,"p",21),i(37),t()()()(),e(38,"div",1)(39,"div",18)(40,"div",19)(41,"label",23),i(42,"Tel\xE9fono:"),t(),e(43,"p",21),i(44,"4234-8511"),t()()(),e(45,"div",18)(46,"div",19)(47,"label",24),i(48,"Rol:"),t(),e(49,"p",21),i(50),t()()()(),e(51,"div",1)(52,"div",18)(53,"div",19)(54,"label",25),i(55,"Fecha de Creaci\xF3n:"),t(),e(56,"p",21),i(57),S(58,"date"),t()()(),e(59,"div",18)(60,"div",19)(61,"label",26),i(62,"\xDAltimo Acceso:"),t(),e(63,"p",21),i(64),S(65,"date"),t()()()(),e(66,"div",1)(67,"div",27)(68,"button",28),g("click",function(){b(a);let r=h();return x(r.onBack())}),p(69,"i",29),i(70," Volver a la Lista "),t()()()()()()()}if(l&2){let a=h();n(5),E("src","./assets/images/users/1.jpg",I),n(2),M("",a.user.nombre," ",a.user.apellido,""),n(2),m(a.user.rol),n(),f(a.user.activo?"bg-success":"bg-danger"),n(),C(" ",a.user.activo?"Activo":"Inactivo"," "),n(5),f(a.user.activo?"btn-warning":"btn-success"),n(),f(a.user.activo?"fe fe-x":"fe fe-check"),n(),C(" ",a.user.activo?"Desactivar":"Activar"," "),n(13),m(a.user.id),n(6),m(a.user.email),n(13),m(a.user.rol),n(7),m(_(58,17,a.user.fechaCreacion,"dd/MM/yyyy")),n(7),m(_(65,20,a.user.ultimoLogin,"dd/MM/yyyy HH:mm"))}}function R(l,d){l&1&&(e(0,"div",1)(1,"div",27)(2,"div",3)(3,"div",4)(4,"div",30)(5,"span",31),i(6,"Cargando..."),t()(),e(7,"p",32),i(8,"Cargando informaci\xF3n del usuario..."),t()()()()())}var K=(()=>{let d=class d{constructor(o,r,u,s,c){this.route=o,this.router=r,this.usuariosService=u,this.toastr=s,this.cdr=c,this.user=null,this.loading=!0}ngOnInit(){this.loadUser()}loadUser(){let o=this.route.snapshot.paramMap.get("id");console.log("Loading user with ID:",o),o?(this.loading=!0,this.usuariosService.obtenerUsuario(o).subscribe({next:r=>{console.log("User response received:",r),this.user=r.data,this.loading=!1,this.cdr.detectChanges()},error:r=>{console.error("Error al cargar usuario:",r),this.loading=!1,this.cdr.detectChanges(),this.toastr.error("Error al cargar el usuario","Error",{timeOut:3e3,positionClass:"toast-top-right"})}})):(console.error("No user ID found in route"),this.loading=!1,this.cdr.detectChanges())}onEdit(){this.user?.id&&this.router.navigate(["/dashboard/hrmdashboards/users/edit-user",this.user.id])}onToggleStatus(){if(this.user?.id){let o=this.user.activo,r=o?"desactivar":"activar";confirm(`\xBFEst\xE1 seguro de que desea ${r} este usuario?`)&&(o?this.usuariosService.deactivateUsuario(this.user.id):this.usuariosService.activateUsuario(this.user.id)).subscribe({next:()=>{this.toastr.success(`Usuario ${r}do exitosamente`,"\xC9xito",{timeOut:3e3,positionClass:"toast-top-right"}),this.loadUser()},error:s=>{console.error("Error response:",s);let c="Error desconocido";s.error?.message?c=s.error.message:s.error?.error?c=s.error.error:s.message?c=s.message:typeof s.error=="string"&&(c=s.error),this.toastr.error(`Error al ${r} el usuario: ${c}`,"Error",{timeOut:3e3,positionClass:"toast-top-right"})}})}}onBack(){this.router.navigate(["/dashboard/hrmdashboards/users/user-list"])}};d.\u0275fac=function(r){return new(r||d)(v(j),v(A),v(H),v(F),v(D))},d.\u0275cmp=w({type:d,selectors:[["app-view-user"]],standalone:!0,features:[k],decls:3,vars:7,consts:[[3,"title","title2","class1","path"],[1,"row"],[1,"col-xl-4"],[1,"card","custom-card"],[1,"card-body","text-center"],[1,"avatar","avatar-xxl","mx-auto","mb-3"],["alt","Usuario",1,"rounded-circle",3,"src"],[1,"mb-1"],[1,"text-muted","mb-3"],[1,"badge","mb-3"],[1,"mt-3"],[1,"btn","btn-primary","btn-sm","me-2",3,"click"],[1,"fe","fe-edit"],[1,"btn","btn-sm",3,"click"],[1,"col-xl-8"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-md-6"],[1,"mb-3"],["for","id",1,"form-label","fw-semibold"],[1,"text-muted"],["for","email",1,"form-label","fw-semibold"],["for","telefono",1,"form-label","fw-semibold"],["for","rol",1,"form-label","fw-semibold"],["for","fechaCreacion",1,"form-label","fw-semibold"],["for","ultimoLogin",1,"form-label","fw-semibold"],[1,"col-12"],[1,"btn","btn-secondary",3,"click"],[1,"fe","fe-arrow-left"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"mt-2"]],template:function(r,u){r&1&&(p(0,"app-hr-dashboard-page-header",0),y(1,O,71,23,"div",1)(2,R,9,0,"div",1)),r&2&&(f("btn btn-secondary"),E("title","Ver Usuario")("title2","Volver a Lista")("class1","")("path","/dashboard/hrmdashboards/users/user-list"),n(),U(!u.loading&&u.user?1:u.loading?2:-1))},dependencies:[B,L,T]});let l=d;return l})();export{K as ViewUserComponent};
