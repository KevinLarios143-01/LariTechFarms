import{a as B}from"./chunk-FN7HEWY4.js";import{a as $}from"./chunk-JMUEYSLK.js";import"./chunk-IORNA22M.js";import{c as R,n as H}from"./chunk-TZ7XX7TS.js";import"./chunk-Q7QIC4CI.js";import"./chunk-PMH5YGMK.js";import{r as V}from"./chunk-LPZBSW5G.js";import"./chunk-7UKZCJ6U.js";import{c as T,e as d,g as I,h as L,m as q,o as w,p as D,q as G,r as j,s as M,u as O,w as k}from"./chunk-BVMR5GE6.js";import{Ib as _,Qa as a,Ra as f,Vb as i,Yb as U,cc as A,db as u,jb as b,jd as N,la as C,nb as F,rb as p,ub as x,vb as y,wb as t,xb as e,yb as m}from"./chunk-KFCCYZAB.js";import"./chunk-REZWHGN7.js";var P=(o,n)=>n.id;function z(o,n){o&1&&(t(0,"div",12),i(1," El nombre es requerido (m\xEDnimo 2 caracteres) "),e())}function J(o,n){o&1&&(t(0,"div",12),i(1," El apellido es requerido (m\xEDnimo 2 caracteres) "),e())}function K(o,n){o&1&&(t(0,"div",12),i(1," Ingrese un email v\xE1lido "),e())}function Q(o,n){if(o&1&&(t(0,"option",20),i(1),e()),o&2){let S=n.$implicit;b("value",S.id),a(),U("",S.nombre," ",S.apellido,"")}}function W(o,n){o&1&&(t(0,"div",12),i(1," La contrase\xF1a es requerida (m\xEDnimo 6 caracteres) "),e())}function X(o,n){o&1&&(t(0,"div",12),i(1," Seleccione un rol "),e())}function Y(o,n){o&1&&(m(0,"span",33),i(1," Guardando... "))}function Z(o,n){o&1&&i(0," Guardar Usuario ")}var me=(()=>{let n=class n{constructor(l,c,r,s,v){this.fb=l,this.router=c,this.usuarioService=r,this.empleadoService=s,this.toastr=v,this.isLoading=!1,this.empleados=[]}ngOnInit(){this.initForm(),this.loadEmpleados()}initForm(){this.userForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],nombre:["",[d.required,d.minLength(2)]],apellido:["",[d.required,d.minLength(2)]],rol:["",[d.required]],id_empleado:[null]})}onSubmit(){this.userForm.valid&&(this.isLoading=!0,this.usuarioService.crearUsuario(this.userForm.value).subscribe({next:l=>{console.log("Usuario creado exitosamente:",l),this.toastr.success("Usuario creado exitosamente","\xC9xito",{timeOut:3e3,positionClass:"toast-top-right"}),this.router.navigate(["/dashboard/hrmdashboards/users/user-list"])},error:l=>{console.error("Error al crear usuario:",l),this.toastr.error("Error al crear usuario: "+(l.error?.message||"Error desconocido"),"Error",{timeOut:3e3,positionClass:"toast-top-right"}),this.isLoading=!1}}))}loadEmpleados(){this.empleadoService.getEmpleados().subscribe({next:l=>{this.empleados=l},error:l=>{console.error("Error al cargar empleados:",l),this.toastr.error("Error al cargar la lista de empleados","Error")}})}onCancel(){this.router.navigate(["/dashboard/hrmdashboards/users/user-list"])}};n.\u0275fac=function(c){return new(c||n)(f(O),f(N),f($),f(B),f(V))},n.\u0275cmp=C({type:n,selectors:[["app-add-user"]],standalone:!0,features:[A],decls:73,vars:14,consts:[[3,"title","title2","class1","path"],[1,"row"],[1,"col-xl-12"],[1,"card","custom-card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"col-md-6"],[1,"form-group","mb-3"],["for","nombre",1,"form-label"],["type","text","formControlName","nombre","placeholder","Ingrese el nombre",1,"form-control"],[1,"invalid-feedback"],["for","apellido",1,"form-label"],["type","text","formControlName","apellido","placeholder","Ingrese el apellido",1,"form-control"],["for","email",1,"form-label"],["type","email","formControlName","email","placeholder","usuario@ejemplo.com",1,"form-control"],["for","id_empleado",1,"form-label"],["formControlName","id_empleado",1,"form-control"],["value",""],[3,"value"],["for","password",1,"form-label"],["type","password","formControlName","password","placeholder","Ingrese la contrase\xF1a",1,"form-control"],["for","rol",1,"form-label"],["formControlName","rol",1,"form-control"],["value","superadmin"],["value","admin"],["value","gerente"],["value","supervisor"],["value","operador"],[1,"col-12"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(c,r){if(c&1&&(m(0,"app-hr-dashboard-page-header",0),t(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),i(6,"Informaci\xF3n del Usuario"),e()(),t(7,"div",6)(8,"form",7),_("ngSubmit",function(){return r.onSubmit()}),t(9,"div",1)(10,"div",8)(11,"div",9)(12,"label",10),i(13,"Nombre *"),e(),m(14,"input",11),u(15,z,2,0,"div",12),e()(),t(16,"div",8)(17,"div",9)(18,"label",13),i(19,"Apellido *"),e(),m(20,"input",14),u(21,J,2,0,"div",12),e()()(),t(22,"div",1)(23,"div",8)(24,"div",9)(25,"label",15),i(26,"Email *"),e(),m(27,"input",16),u(28,K,2,0,"div",12),e()(),t(29,"div",8)(30,"div",9)(31,"label",17),i(32,"Empleado"),e(),t(33,"select",18)(34,"option",19),i(35,"Seleccione un empleado (opcional)"),e(),x(36,Q,2,3,"option",20,P),e()()()(),t(38,"div",1)(39,"div",8)(40,"div",9)(41,"label",21),i(42,"Contrase\xF1a *"),e(),m(43,"input",22),u(44,W,2,0,"div",12),e()(),m(45,"div",8),e(),t(46,"div",1)(47,"div",8)(48,"div",9)(49,"label",23),i(50,"Rol *"),e(),t(51,"select",24)(52,"option",19),i(53,"Seleccione un rol"),e(),t(54,"option",25),i(55,"Super Administrador"),e(),t(56,"option",26),i(57,"Administrador"),e(),t(58,"option",27),i(59,"Gerente"),e(),t(60,"option",28),i(61,"Supervisor"),e(),t(62,"option",29),i(63,"Operador"),e()(),u(64,X,2,0,"div",12),e()(),m(65,"div",8),e(),t(66,"div",1)(67,"div",30)(68,"button",31),u(69,Y,2,0)(70,Z,1,0),e(),t(71,"button",32),_("click",function(){return r.onCancel()}),i(72," Cancelar "),e()()()()()()()()),c&2){let s,v,h,g,E;F("btn btn-secondary"),b("title","Agregar Usuario")("title2","Volver a Lista")("class1","")("path","/dashboard/hrmdashboards/users/user-list"),a(8),b("formGroup",r.userForm),a(7),p((s=r.userForm.get("nombre"))!=null&&s.invalid&&((s=r.userForm.get("nombre"))!=null&&s.touched)?15:-1),a(6),p((v=r.userForm.get("apellido"))!=null&&v.invalid&&((v=r.userForm.get("apellido"))!=null&&v.touched)?21:-1),a(7),p((h=r.userForm.get("email"))!=null&&h.invalid&&((h=r.userForm.get("email"))!=null&&h.touched)?28:-1),a(8),y(r.empleados),a(8),p((g=r.userForm.get("password"))!=null&&g.invalid&&((g=r.userForm.get("password"))!=null&&g.touched)?44:-1),a(20),p((E=r.userForm.get("rol"))!=null&&E.invalid&&((E=r.userForm.get("rol"))!=null&&E.touched)?64:-1),a(4),b("disabled",r.userForm.invalid||r.isLoading),a(),p(r.isLoading?69:70)}},dependencies:[H,R,k,q,j,M,T,G,I,L,w,D]});let o=n;return o})();export{me as AddUserComponent};
