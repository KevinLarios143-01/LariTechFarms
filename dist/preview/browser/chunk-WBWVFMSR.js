import{a as O}from"./chunk-KLA3X4DQ.js";import"./chunk-IORNA22M.js";import{n as P}from"./chunk-FG6B37U2.js";import"./chunk-S5Y45Y7X.js";import"./chunk-35J6RYA3.js";import{r as B}from"./chunk-P6RHK3TE.js";import"./chunk-LAI4YRFV.js";import"./chunk-I6FKYEZO.js";import{Cb as S,Ib as h,Kb as s,Qa as d,Qc as M,Ra as u,Tc as D,Wb as i,Xb as c,Yb as m,Zb as I,db as v,dc as y,id as F,kd as A,la as E,nc as f,ob as T,pc as w,qc as g,rb as x,ua as b,va as _,wb as t,xb as e,yb as k,yc as V}from"./chunk-W3KPMJ6O.js";import"./chunk-REZWHGN7.js";function N(a,o){if(a&1){let n=S();t(0,"button",10),h("click",function(){b(n);let r=s();return _(r.editTicket())}),k(1,"i",11),i(2,"Editar "),e()}}function z(a,o){a&1&&(t(0,"div",8)(1,"div",12)(2,"span",13),i(3,"Cargando..."),e()()())}function L(a,o){if(a&1&&(t(0,"div",23)(1,"div",20)(2,"label",21),i(3,"C\xF3digo de Autorizaci\xF3n:"),e(),t(4,"p",22),i(5),e()()()),a&2){let n=s(2);d(5),c(n.ticket.codigoAutorizacion)}}function U(a,o){if(a&1&&(t(0,"div",26)(1,"span",27),k(2,"i",28),e(),t(3,"div")(4,"h6",29),i(5),e(),t(6,"span",25),i(7),e()()(),t(8,"div",20)(9,"label",21),i(10,"Total de la Venta:"),e(),t(11,"p",22),i(12),f(13,"number"),e()(),t(14,"div",20)(15,"label",21),i(16,"Estado de la Venta:"),e(),t(17,"p",22)(18,"span",30),i(19,"Activa"),e()()()),a&2){let n=s(2);d(5),m("Venta #VT-",n.ticket.venta.id.toString().padStart(3,"0"),""),d(2),c(n.ticket.venta.cliente.nombre||"Cliente N/A"),d(5),m("Q",w(13,3,n.ticket.venta.total,"1.2-2"),"")}}function R(a,o){a&1&&(t(0,"p",25),i(1,"Informaci\xF3n de la venta no disponible"),e())}function H(a,o){if(a&1&&(t(0,"div",9)(1,"div",31)(2,"div",15)(3,"div",16)(4,"h4",17),i(5,"Detalle de Despacho por Lotes"),e()(),t(6,"div",18)(7,"div",32)(8,"table",33)(9,"thead")(10,"tr")(11,"th"),i(12,"Lote"),e(),t(13,"th"),i(14,"Galera"),e(),t(15,"th"),i(16,"Producto"),e(),t(17,"th"),i(18,"Cantidad Despachada"),e(),t(19,"th"),i(20,"Fecha de Producci\xF3n"),e()()(),t(21,"tbody")(22,"tr")(23,"td"),i(24),e(),t(25,"td"),i(26),e(),t(27,"td"),i(28),e(),t(29,"td"),i(30),e(),t(31,"td"),i(32),f(33,"date"),e()()(),t(34,"tfoot")(35,"tr",34)(36,"td",35)(37,"strong"),i(38,"Total Despachado:"),e()(),t(39,"td")(40,"strong"),i(41),e()(),k(42,"td"),e()()()()()()()()),a&2){let n=s(2);d(24),m("Lote #",n.ticket.lote.id,""),d(2),c(n.ticket.lote.galera||"N/A"),d(2),I("",(n.ticket.producto==null?null:n.ticket.producto.nombre)||"N/A"," - ",(n.ticket.producto==null?null:n.ticket.producto.tamanio)||"N/A",""),d(2),m("",n.ticket.cantidad," unidades"),d(2),c(g(33,7,n.ticket.fecha,"dd/MM/yyyy","UTC")),d(9),m("",n.ticket.cantidad," unidades")}}function q(a,o){if(a&1&&(t(0,"div",9)(1,"div",14)(2,"div",15)(3,"div",16)(4,"h4",17),i(5,"Informaci\xF3n del Ticket"),e()(),t(6,"div",18)(7,"div",9)(8,"div",19)(9,"div",20)(10,"label",21),i(11,"ID de Ticket:"),e(),t(12,"p",22),i(13),e()()(),t(14,"div",19)(15,"div",20)(16,"label",21),i(17,"Estado:"),e(),t(18,"p",22)(19,"span"),i(20),e()()()(),t(21,"div",19)(22,"div",20)(23,"label",21),i(24,"Fecha de Creaci\xF3n:"),e(),t(25,"p",22),i(26),f(27,"date"),e()()(),t(28,"div",19)(29,"div",20)(30,"label",21),i(31,"Fecha de Despacho:"),e(),t(32,"p",22),i(33),f(34,"date"),e()()(),t(35,"div",19)(36,"div",20)(37,"label",21),i(38,"Cantidad Total:"),e(),t(39,"p",22),i(40),e()()(),t(41,"div",19)(42,"div",20)(43,"label",21),i(44,"Usuario:"),e(),t(45,"p",22),i(46),e()()(),v(47,L,6,1,"div",23),e()()()(),t(48,"div",24)(49,"div",15)(50,"div",16)(51,"h4",17),i(52,"Informaci\xF3n de la Venta"),e()(),t(53,"div",18),v(54,U,20,6)(55,R,2,0,"p",25),e()()()(),v(56,H,43,11,"div",9)),a&2){let n=s();d(13),m("#TK-",n.ticket.id.toString().padStart(3,"0"),""),d(6),T("badge bg-",n.getStatusClass(n.ticket.estado),"-transparent"),d(),c(n.ticket.estado),d(6),c(g(27,12,n.ticket.fecha,"dd/MM/yyyy HH:mm","UTC")),d(7),c(g(34,16,n.ticket.fecha,"dd/MM/yyyy","UTC")),d(7),m("",n.ticket.cantidad," unidades"),d(6),c((n.ticket.usuario==null?null:n.ticket.usuario.nombre)||"N/A"),d(),x(n.ticket.codigoAutorizacion?47:-1),d(7),x(n.ticket.venta?54:55),d(2),x(n.ticket.lote?56:-1)}}function G(a,o){if(a&1){let n=S();t(0,"div",9)(1,"div",36)(2,"div",15)(3,"div",37),k(4,"i",38),t(5,"h4"),i(6,"Ticket no encontrado"),e(),t(7,"p",25),i(8,"El ticket solicitado no existe o no se pudo cargar."),e(),t(9,"button",10),h("click",function(){b(n);let r=s();return _(r.goBack())}),i(10,"Volver a la lista"),e()()()()()}}var Z=(()=>{let o=class o{constructor(l,r,p,C,j){this.route=l,this.router=r,this.ticketService=p,this.toastr=C,this.cdr=j,this.ticket=null,this.loading=!1,this.ticketId=0}ngOnInit(){this.route.params.subscribe(l=>{this.ticketId=+l.id,this.ticketId&&this.loadTicket()})}loadTicket(){this.loading=!0,this.ticketService.getTicketById(this.ticketId).subscribe({next:l=>{this.ticket=l?.data||null,this.loading=!1,this.cdr.detectChanges()},error:l=>{console.error("Error loading ticket:",l),this.toastr.error("Error al cargar el ticket","Error",{timeOut:3e3,positionClass:"toast-top-right",progressBar:!0,closeButton:!0}),this.loading=!1,this.cdr.detectChanges()}})}goBack(){this.router.navigate(["/dashboard/business-dashboard/ticket-list"])}editTicket(){this.router.navigate(["/dashboard/business-dashboard/new-ticket"],{queryParams:{id:this.ticketId,mode:"edit"}})}getStatusClass(l){switch(l?.toLowerCase()){case"completado":return"success";case"pendiente":return"warning";case"cancelado":return"danger";default:return"secondary"}}};o.\u0275fac=function(r){return new(r||o)(u(F),u(A),u(O),u(B),u(V))},o.\u0275cmp=E({type:o,selectors:[["app-view-ticket"]],standalone:!0,features:[y],decls:13,vars:2,consts:[[1,"page-header","d-lg-flex","d-block"],[1,"page-leftheader"],[1,"page-title"],[1,"page-rightheader"],[1,"btn-list","d-flex","gap-1"],[1,"btn","btn-outline-primary",3,"click"],[1,"fe","fe-arrow-left","fs-12","my-auto","me-2"],[1,"btn","btn-primary"],[1,"text-center","py-4"],[1,"row"],[1,"btn","btn-primary",3,"click"],[1,"fe","fe-edit-2","fs-12","my-auto","me-2"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"col-xl-8","col-md-12","col-lg-8"],[1,"card","custom-card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],[1,"form-control-static"],[1,"col-md-12"],[1,"col-xl-4","col-md-12","col-lg-4"],[1,"text-muted"],[1,"d-flex","align-items-center","mb-3"],[1,"avatar","avatar-lg","me-3","avatar-rounded","bg-success-transparent"],[1,"fe","fe-shopping-cart","fs-18"],[1,"mb-1"],[1,"badge","bg-success-transparent"],[1,"col-xl-12"],[1,"table-responsive"],[1,"table","table-vcenter","text-nowrap","table-bordered"],[1,"table-active"],["colspan","3",1,"text-end"],[1,"col-12"],[1,"card-body","text-center","py-5"],[1,"fe","fe-alert-circle","fs-48","text-muted","mb-3"]],template:function(r,p){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),i(3,"Detalle de Ticket"),e()(),t(4,"div",3)(5,"div",4)(6,"button",5),h("click",function(){return p.goBack()}),k(7,"i",6),i(8,"Volver "),e(),v(9,N,3,0,"button",7),e()()(),v(10,z,4,0,"div",8)(11,q,57,20)(12,G,11,0,"div",9)),r&2&&(d(9),x(p.ticket?9:-1),d(),x(p.loading?10:p.ticket?11:12))},dependencies:[P,M,D],styles:[".form-control-static[_ngcontent-%COMP%]{padding:.375rem 0;margin-bottom:0;font-weight:500}.card-title[_ngcontent-%COMP%]{color:#495057;font-weight:600}.badge[_ngcontent-%COMP%]{font-size:.75rem}.table-active[_ngcontent-%COMP%]{background-color:#007bff1a}"]});let a=o;return a})();export{Z as ViewTicketComponent};
