import{a as y}from"./chunk-IORNA22M.js";import{c as et,n as at}from"./chunk-MLXH54UA.js";import{c as it}from"./chunk-MMT2JZQZ.js";import"./chunk-VATDXQ3S.js";import"./chunk-V63I4SR4.js";import"./chunk-ZWG2JCXX.js";import"./chunk-57KCC2QJ.js";import{$ as f,$c as X,Cb as V,G as b,I as C,Ib as B,K as T,Kb as $,Na as z,Qa as n,Ra as F,Rc as W,T as j,Uc as u,Vb as a,Wb as d,X as A,Yb as q,ad as Y,bc as G,cc as J,d as w,db as N,e as p,ea as k,ha as S,jb as _,la as L,mc as K,md as Z,nb as E,nc as Q,o as g,pd as tt,r as x,rb as O,ua as M,ub as R,va as P,vb as H,wb as e,xb as i,yb as c}from"./chunk-4W3Y4UZY.js";import{a as I,b as D}from"./chunk-REZWHGN7.js";var h=(()=>{let r=class r{constructor(t,l){this.pipe=t,this.http=l,this.apiUrl=`${y.apiUrl}/v1/usuarios`,this._loading$=new p(!0),this._search$=new w,this._userData$=new p([]),this._total$=new p(0),this._state={page:1,pageSize:10,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe(f(()=>this._loading$.next(!0)),C(200),A(()=>this._search()),T(200),f(()=>this._loading$.next(!1))).subscribe(m=>{this._userData$.next(m.userData),this._total$.next(m.total)}),this._search$.next()}get userData$(){return this._userData$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}getUserStats(){return this.http.get(`${y.apiUrl}/v1/usuarios/stats`).pipe(x(t=>t.data.data),b(()=>g({totalUsuarios:0,usuariosActivos:0,usuariosInactivos:0,usuariosPorRol:[],usuariosNuevos:0})))}set page(t){this._set({page:t})}set pageSize(t){this._set({pageSize:t})}set searchTerm(t){this._set({searchTerm:t})}set sortColumn(t){this._set({sortColumn:t})}set sortDirection(t){this._set({sortDirection:t})}_set(t){Object.assign(this._state,t),this._search$.next()}_search(){let{pageSize:t,page:l,searchTerm:m}=this._state,v=new X().set("page",l.toString()).set("limit",t.toString());return m&&(v=v.set("search",m)),this.http.get(this.apiUrl,{params:v}).pipe(x(U=>({userData:this.mapUsuarios(U.data.data),total:U.data.pagination.total})),b(()=>g({userData:[],total:0})))}mapUsuarios(t){return t.map(l=>D(I({},l),{img:"./assets/images/users/1.jpg"}))}};r.\u0275fac=function(l){return new(l||r)(S(u),S(Y))},r.\u0275prov=k({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();var nt=(o,r)=>r.id_usuario;function ot(o,r){if(o&1&&(e(0,"div",1)(1,"div",10)(2,"div",3)(3,"div",6)(4,"div",1)(5,"div",11)(6,"div",12)(7,"span",13),a(8,"Total Usuarios"),i(),e(9,"h3",14),a(10),i()()(),e(11,"div",15)(12,"div",16),c(13,"i",17),i()()()()()(),e(14,"div",10)(15,"div",3)(16,"div",6)(17,"div",1)(18,"div",11)(19,"div",12)(20,"span",13),a(21,"Usuarios Activos"),i(),e(22,"h3",18),a(23),i()()(),e(24,"div",15)(25,"div",19),c(26,"i",20),i()()()()()(),e(27,"div",10)(28,"div",3)(29,"div",6)(30,"div",1)(31,"div",11)(32,"div",12)(33,"span",13),a(34,"Usuarios Inactivos"),i(),e(35,"h3",21),a(36),i()()(),e(37,"div",15)(38,"div",22),c(39,"i",23),i()()()()()(),e(40,"div",10)(41,"div",3)(42,"div",6)(43,"div",1)(44,"div",11)(45,"div",12)(46,"span",13),a(47,"Nuevos Usuarios"),i(),e(48,"h3",24),a(49),i()()(),e(50,"div",15)(51,"div",25),c(52,"i",26),i()()()()()()()),o&2){let s=$();n(10),d(s.stats.totalUsuarios||0),n(13),d(s.stats.usuariosActivos||0),n(13),d(s.stats.usuariosInactivos||0),n(13),d(s.stats.usuariosNuevos||0)}}function lt(o,r){if(o&1){let s=V();e(0,"tr",9)(1,"th",27),a(2),i(),e(3,"td")(4,"div",28)(5,"div",29),c(6,"img",30),i(),e(7,"div")(8,"div",31)(9,"h6",32),a(10),i()()()()(),e(11,"td"),a(12),i(),e(13,"td"),a(14),i(),e(15,"td"),a(16),i(),e(17,"td"),a(18),i(),e(19,"td")(20,"span",33),a(21),i()(),e(22,"td")(23,"a",34),c(24,"i",35),i(),e(25,"a",36),B("click",function(){let l=M(s).$implicit,m=$();return P(m.deleteData(l.id_usuario))}),c(26,"i",37),i()()()}if(o&2){let s=r.$implicit;n(2),d(s.id_usuario),n(4),_("src",s.img,z),n(4),q("",s.nombre," ",s.apellido,""),n(2),d(s.email),n(2),d(s.telefono),n(2),d(s.rol),n(2),d(s.ultimo_acceso),n(2),E(s.activo?"bg-success":"bg-danger"),n(),d(s.activo?"Activo":"Inactivo")}}var Ut=(()=>{let r=class r{constructor(t){this.userService=t,this.stats=null,this.userList$=t.userData$,this.total$=t.total$,this.loading$=t.loading$,this.obtenerStats()}obtenerStats(){this.stats$=this.userService.getUserStats().pipe(j(1)),this.stats$.subscribe({next:t=>{console.log("Stats received:",t),this.stats=t},error:t=>console.error("Error fetching stats:",t)})}ngOnInit(){}deleteData(t){console.log("Eliminar usuario:",t)}};r.\u0275fac=function(l){return new(l||r)(F(h))},r.\u0275cmp=L({type:r,selectors:[["app-user-list"]],standalone:!0,features:[G([h,u]),J],decls:33,vars:9,consts:[[3,"title","title2","class1","path"],[1,"row"],[1,"col-md-12"],[1,"card","custom-card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"table-responsive"],[1,"table","mb-0","text-nowrap","text-md-nowrap","table-bordered","border"],[1,"border-bottom"],[1,"col-xl-3","col-lg-6","col-md-6"],[1,"col-7"],[1,"mt-0","text-start"],[1,"fw-medium"],[1,"mb-0","mt-1","text-success"],[1,"col-5"],[1,"icon1","bg-success-transparent","my-auto","float-end"],[1,"las","la-users"],[1,"mb-0","mt-1","text-primary"],[1,"icon1","bg-primary-transparent","my-auto","float-end"],[1,"las","la-user-check"],[1,"mb-0","mt-1","text-secondary"],[1,"icon1","bg-secondary-transparent","my-auto","float-end"],[1,"las","la-user-times"],[1,"mb-0","mt-1","text-danger"],[1,"icon1","bg-danger-transparent","my-auto","float-end"],[1,"las","la-user-plus"],["scope","row"],[1,"d-flex","align-items-center"],[1,"avatar","me-2","avatar-rounded"],["alt","img",3,"src"],[1,"lh-1"],[1,"mb-1"],[1,"badge"],["routerLink","/dashboard/hrmdashboards/users/view-user",1,"btn","btn-primary","btn-icon"],["data-bs-toggle","tooltip","data-original-title","Ver/Editar",1,"fe","fe-edit"],["data-bs-toggle","tooltip","data-original-title","Eliminar",1,"btn","btn-danger","btn-icon",3,"click"],[1,"fe","fe-trash-2"]],template:function(l,m){l&1&&(c(0,"app-hr-dashboard-page-header",0),N(1,ot,53,4,"div",1),e(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),a(7,"Lista de usuarios"),i()(),e(8,"div",6)(9,"div",7)(10,"table",8)(11,"thead")(12,"tr",9)(13,"th"),a(14,"ID"),i(),e(15,"th"),a(16,"Usuario"),i(),e(17,"th"),a(18,"Email"),i(),e(19,"th"),a(20,"Tel\xE9fono"),i(),e(21,"th"),a(22,"Rol"),i(),e(23,"th"),a(24,"\xDAltimo Acceso"),i(),e(25,"th"),a(26,"Estado"),i(),e(27,"th"),a(28,"Acciones"),i()()(),e(29,"tbody"),R(30,lt,27,11,"tr",9,nt),K(32,"async"),i()()()()()()()),l&2&&(E("btn btn-primary"),_("title","Usuarios")("title2","Agregar Nuevo Usuario")("class1","")("path","/dashboard/hrmdashboards/users/add-user"),n(),O(m.stats?1:-1),n(29),H(Q(32,7,m.userList$)))},dependencies:[at,et,tt,Z,it,W]});let o=r;return o})();export{Ut as UserListComponent};
